<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„° - ì• ë‹ˆí•œtv</title>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ë° ë””ìì¸ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --gradient-start: #667eea; --gradient-end: #764ba2; --accent: #f093fb; --dark: #1a1a2e; --light: #f8f9fa; }
        body { font-family: 'Noto Sans KR', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 40px 20px; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; position: relative; z-index: 1; }
        .header { text-align: center; margin-bottom: 50px; color: white; animation: fadeInDown 0.8s ease-out; }
        h1 { font-family: 'Gowun Batang', serif; font-size: 3.5em; text-shadow: 0 4px 20px rgba(0,0,0,0.3); }

        /* API ë° ì˜µì…˜ ì„¹ì…˜ */
        .api-key-section, .step, .instruction-box { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); padding: 30px; border-radius: 25px; margin-bottom: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
        .step-title { font-size: 1.4em; font-weight: 700; border-left: 5px solid var(--accent); padding-left: 20px; margin-bottom: 20px; }
        .btn-group { display: flex; flex-wrap: wrap; gap: 12px; }
        button { padding: 12px 24px; border: 2px solid #e9ecef; border-radius: 50px; background: #f8f9fa; cursor: pointer; transition: 0.3s; font-weight: 500; }
        button.active { background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%); color: white; border: none; transform: translateY(-3px); box-shadow: 0 8px 25px rgba(102,126,234,0.4); }
        .main-btn { width: 100%; padding: 25px; background: linear-gradient(135deg, #FF0000 0%, #cc0000 100%); color: white; border: none; border-radius: 20px; font-size: 1.5em; font-weight: 700; cursor: pointer; margin-top: 15px; box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3); }
        
        /* ê²°ê³¼ ì¶œë ¥ ì˜ì—­ (ëŒ€í‘œë‹˜ ìš”ì²­ ë ˆì´ì•„ì›ƒ ë³µêµ¬) */
        #result { margin-top: 50px; display: none; }
        .package-section { background: #fff; border-radius: 20px; padding: 30px; margin-bottom: 40px; border: 2px solid var(--accent); }
        .package-tab { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #f1f3f5; padding-bottom: 15px; }
        .copy-box { background: #f8f9fa; padding: 20px; border-radius: 15px; position: relative; margin-bottom: 15px; border: 1px solid #e9ecef; }
        .copy-btn-sm { position: absolute; top: 15px; right: 15px; background: var(--dark); color: white; border: none; padding: 5px 12px; border-radius: 5px; font-size: 0.8em; }
        .song-card { background: white; border-radius: 20px; padding: 30px; margin-bottom: 25px; border-top: 6px solid var(--accent); position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .song-card h3 { font-size: 1.8em; margin-bottom: 15px; color: var(--dark); }
        .style-tag-box { background: #f1f3f5; padding: 10px 15px; border-radius: 10px; font-family: monospace; font-size: 0.9em; color: #666; margin-bottom: 20px; }
        pre { white-space: pre-wrap; line-height: 1.8; font-size: 1.05em; color: #444; }
        .loading { text-align: center; color: white; padding: 50px; font-size: 1.5em; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„°</h1>
        <p class="subtitle">âœ¨ ì• ë‹ˆí•œ ìµìŠ¤í´ë£¨ì‹œë¸Œ : 108ë§Œ ìœ íŠœë²„ì˜ ë…¸í•˜ìš° âœ¨</p>
    </div>

    <div class="api-key-section">
        <h3>ğŸ”‘ Google API í‚¤ ì„¤ì •</h3>
        <div style="display:flex; gap:10px; margin-top:15px;">
            <input type="password" id="api-key-input" placeholder="AIzaSy... í˜•ì‹ì˜ í‚¤ ì…ë ¥" style="flex:1; padding:15px; border-radius:12px; border:2px solid #eee;">
            <button id="save-api-key-btn" style="background:var(--gradient-start); color:white;">ğŸ’¾ ì €ì¥</button>
        </div>
        <p id="api-status" style="margin-top:10px; font-size:0.9em; display:none;"></p>
    </div>

    <div id="options-area">
        <div class="step">
            <span class="step-title">ğŸ¸ 1. ì¥ë¥´ ì„ íƒ</span>
            <div class="btn-group" id="genre-btns"></div>
        </div>
        <div class="step">
            <span class="step-title">âœ¨ 2. ë¶„ìœ„ê¸° ì„ íƒ</span>
            <div class="btn-group" id="mood-btns"></div>
        </div>
        <div class="step">
            <span class="step-title">ğŸ¤ 3. ë³´ì»¬ ì„ íƒ</span>
            <div class="btn-group" id="vocal-btns"></div>
        </div>
        <div class="step">
            <span class="step-title">ğŸ‘¥ 7. íƒ€ê²Ÿ ì—°ë ¹ëŒ€ ì„ íƒ</span>
            <div class="btn-group" id="age-group-btns"></div>
        </div>
        <div class="step">
            <span class="step-title">ğŸŒ 8. ê°€ì‚¬ ì–¸ì–´ ì„¤ì •</span>
            <div class="btn-group" id="lang-btns"></div>
        </div>
        <div class="step">
            <span class="step-title">ğŸ“ 9. ê°€ì‚¬ ì£¼ì œ</span>
            <textarea id="custom-theme" placeholder="ì—¬ê¸°ì— ìƒì„¸ ì£¼ì œë¥¼ ì ì–´ì£¼ì„¸ìš” (í•„ìˆ˜)"></textarea>
        </div>
    </div>

    <button class="main-btn" id="generate-btn">ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„± (10ê³¡ ì„¸íŠ¸)</button>

    <div id="result">
        <div class="package-section" id="youtube-package">
            <h2 style="margin-bottom:20px;">ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ ì—…ë¡œë“œ íŒ¨í‚¤ì§€</h2>
            <div class="package-tab" id="lang-tabs"></div>
            <div id="package-display"></div>
        </div>
        <div id="song-cards-area"></div>
    </div>
</div>

<script>
    // [ë°ì´í„° ì„¤ì •]
    const data = {
        genres: ["ğŸ¹ ì‹œí‹°íŒ", "ğŸ§ ë¡œíŒŒì´", "ğŸ¸ K-ë¡", "ğŸ§˜ ëª…ìƒ", "ğŸ’« K-pop", "ğŸ’” ë°œë¼ë“œ", "ğŸ‘¶ ìì¥ê°€"],
        moods: ["ğŸŒ™ ì”ì”í•œ", "ğŸ˜¢ ìŠ¬í”ˆ", "ğŸ¤— ë”°ëœ»í•œ", "âš¡ í™œê¸°ì°¬", "ğŸ’• ë¡œë§¨í‹±"],
        vocals: ["ğŸ‘© ë§‘ì€ ì—¬ì„±", "ğŸ™ï¸ í—ˆìŠ¤í‚¤ ë‚¨ì„±", "ğŸ‘¦ ì†Œë…„", "ğŸ‘§ ì†Œë…€", "ğŸ¼ ì—°ì£¼ê³¡"],
        ageGroups: ["ğŸ‘¶ ìœ ì•„", "ğŸ’ 10ëŒ€", "ğŸ’¼ 20ëŒ€", "ğŸ‘” 3040", "ğŸ© 5060", "ğŸŒ ì „ì—°ë ¹"],
        langs: ["ğŸ‡°ğŸ‡· í•œêµ­ì–´", "ğŸ‡ºğŸ‡¸ ì˜ì–´", "ğŸŒ í•œ+ì˜ ì„ì–´ì„œ"]
    };

    const selections = { genre: null, mood: null, vocal: null, ageGroup: null, lang: null };
    let apiKey = localStorage.getItem('gemini_api_key') || '';

    // [ì´ˆê¸°í™”]
    function init() {
        if(apiKey) document.getElementById('api-key-input').value = apiKey;
        Object.keys(selections).forEach(key => {
            const container = document.getElementById(`${key.replace(/[A-Z]/g, m => "-" + m.toLowerCase())}-btns`);
            if(!container) return;
            data[key + 's'].forEach(item => {
                const btn = document.createElement('button');
                btn.innerText = item;
                btn.onclick = () => {
                    Array.from(container.children).forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selections[key] = item;
                };
                container.appendChild(btn);
            });
        });
    }

    // [API í‚¤ ì €ì¥]
    document.getElementById('save-api-key-btn').onclick = () => {
        const val = document.getElementById('api-key-input').value.trim();
        if(val) {
            apiKey = val;
            localStorage.setItem('gemini_api_key', val);
            alert('âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
    };

    // [ë³µì‚¬ í•¨ìˆ˜]
    async function copy(text, label) {
        await navigator.clipboard.writeText(text);
        alert(`âœ“ ${label} ë³µì‚¬ ì™„ë£Œ!`);
    }

    // [í•µì‹¬: ê²°ê³¼ íŒŒì‹± ë° ì¹´ë“œ ìƒì„±]
    function displayResults(rawText) {
        const resultDiv = document.getElementById('result');
        const cardArea = document.getElementById('song-cards-area');
        const packageArea = document.getElementById('package-display');
        
        resultDiv.style.display = 'block';
        cardArea.innerHTML = '';
        
        // 1. 10ê³¡ ì¹´ë“œ ìƒì„±
        const songs = rawText.split(/ğŸµ ê³¡ \d+:/g).filter(s => s.trim().length > 100);
        songs.forEach((song, i) => {
            const lines = song.trim().split('\n');
            const title = lines[0].replace('ì œëª©:', '').trim();
            const style = lines[1].replace('ìŠ¤íƒ€ì¼ íƒœê·¸:', '').trim();
            const lyrics = lines.slice(2).join('\n').trim();

            const card = document.createElement('div');
            card.className = 'song-card';
            card.innerHTML = `
                <div style="display:flex; justify:space-between; align-items:center;">
                    <h3>Song Variation #${i+1}: ${title}</h3>
                    <div>
                        <button onclick="copy('${title.replace(/'/g,"\\'")}','ì œëª©')">ì œëª© ë³µì‚¬</button>
                        <button onclick="copy('${lyrics.replace(/\n/g,'\\n').replace(/'/g,"\\'")}','ê°€ì‚¬')">ê°€ì‚¬ ë³µì‚¬</button>
                    </div>
                </div>
                <div class="style-tag-box">${style}</div>
                <pre>${lyrics}</pre>
            `;
            cardArea.appendChild(card);
        });

        // 2. ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ì¶œë ¥
        const pkg = rawText.split('## PART 2:')[1] || "ë°ì´í„° ë¶„ì„ ì¤‘...";
        packageArea.innerHTML = `<pre style="background:white; padding:20px; border-radius:10px;">${pkg.trim()}</pre>`;
        
        window.scrollTo({ top: resultDiv.offsetTop - 50, behavior: 'smooth' });
    }

    // [API í˜¸ì¶œ ë©”ì¸]
    document.getElementById('generate-btn').onclick = async () => {
        if(!apiKey) return alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”!');
        const theme = document.getElementById('custom-theme').value;
        if(!theme) return alert('ê°€ì‚¬ ì£¼ì œë¥¼ ì ì–´ì£¼ì„¸ìš”!');

        const btn = document.getElementById('generate-btn');
        btn.disabled = true;
        btn.innerText = 'â³ AIê°€ 10ê³¡ íŒ¨í‚¤ì§€ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...';

        try {
            const prompt = `[ëª…ë ¹] Suno AIìš© 10ê³¡ íŒ¨í‚¤ì§€ì™€ ìœ íŠœë¸Œ ê¸€ë¡œë²Œ ì„¸íŠ¸ë¥¼ ìƒì„±í•˜ë¼.
            ë³€ìˆ˜: ì¥ë¥´(${selections.genre}), ì—°ë ¹ëŒ€(${selections.ageGroup}), ì£¼ì œ(${theme})
            
            ## PART 1: 10ê³¡ ìƒì„±
            í˜•ì‹: ğŸµ ê³¡ 1: ì œëª©: / ìŠ¤íƒ€ì¼ íƒœê·¸: / ê°€ì‚¬: (ì´ í˜•ì‹ì„ 10ë²ˆ ë°˜ë³µ)
            
            ## PART 2: ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ (6ê°œêµ­ì–´ ë²ˆì—­ í¬í•¨)`;

            // âœ… ìµœì‹  ì•ˆì • ë²„ì „ API ì£¼ì†Œ ì‚¬ìš©
            const url = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
            const res = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });

            const data = await res.json();
            if(!res.ok) throw new Error(data.error?.message || 'API ì˜¤ë¥˜');
            
            displayResults(data.candidates[0].content.parts[0].text);
        } catch(e) {
            alert('ì—ëŸ¬ ë°œìƒ: ' + e.message);
        } finally {
            btn.disabled = false;
            btn.innerText = 'ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„± (10ê³¡ ì„¸íŠ¸)';
        }
    };

    init();
</script>
</body>
</html>
