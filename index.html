<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„° - ì• ë‹ˆí•œtv</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;800;900&family=Noto+Sans+KR:wght@500;700;800;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --gradient-start: #667eea;
      --gradient-end: #764ba2;
      --accent: #f093fb;
    }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      font-weight: 500;
      background: #000;
      min-height: 100vh;
      padding: 60px 20px;
      position: relative;
      overflow-x: hidden;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background:
        radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
      pointer-events: none;
      animation: float 20s ease-in-out infinite;
    }
    @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    .container { max-width: 1400px; margin: 0 auto; position: relative; z-index: 1; }
    .header { text-align: center; margin-bottom: 50px; animation: fadeInDown 0.8s ease-out; }
    @keyframes fadeInDown { from { opacity:0; transform: translateY(-30px); } to { opacity:1; transform: translateY(0); } }
    h1, h2, h3 { font-family: 'Orbitron','Noto Sans KR', sans-serif; font-weight: 900; letter-spacing: 1px; }
    h1 { font-size: 4.5em; color: #fff; margin-bottom: 20px; text-transform: uppercase; }
    .subtitle { font-size: 1em; color: #888; font-weight: 400; letter-spacing: 4px; text-transform: uppercase; }
    
    #reset-btn {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      color: white;
      border: 2px solid rgba(255,255,255,0.3);
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      float: right;
      margin-bottom: 30px;
    }
    #reset-btn:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); }
    
    .api-key-section {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(20px);
      padding: 30px;
      border-radius: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      border: 2px solid var(--accent);
      animation: fadeInUp 0.8s ease-out 0.15s backwards;
    }
    @keyframes fadeInUp { from { opacity:0; transform: translateY(30px); } to { opacity:1; transform: translateY(0); } }
    .api-key-section h3 { color: var(--gradient-start); font-size: 1.4em; margin-bottom: 15px; }
    .api-key-section p { color: #495057; margin-bottom: 15px; line-height: 1.6; }
    .api-key-section a { color: var(--gradient-start); text-decoration: none; font-weight: 600; }
    
    .api-input-group { display: flex; gap: 12px; margin-bottom: 15px; }
    .api-input-group input {
      flex: 1;
      padding: 14px 20px;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      font-size: 1em;
      font-family: 'Courier New', monospace;
    }
    .api-input-group button {
      padding: 14px 28px;
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .api-status { font-size: 0.9em; padding: 10px 15px; border-radius: 8px; display: none; }
    .api-status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; display: block; }
    .api-status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; display: block; }
    
    .instruction-box {
      background: #0a0a0a;
      border: 1px solid #1a1a1a;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    .instruction-box h3 { color: #fff; font-size: 1.8em; margin-bottom: 25px; }
    .instruction-box ol { padding-left: 30px; line-height: 2.2; }
    .instruction-box li { margin-bottom: 16px; color: #ccc; font-size: 1.1em; }
    
    .step {
      background: #0a0a0a;
      border: 1px solid #1a1a1a;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      transition: all 0.3s;
    }
    .step:hover { border-color: #2a2a2a; box-shadow: 0 8px 30px rgba(0,0,0,0.7); transform: translateY(-2px); }
    .step-title {
      font-size: 1.7em;
      font-weight: 800;
      color: #fff;
      margin-bottom: 25px;
      display: block;
      padding-left: 25px;
      border-left: 4px solid #fff;
    }
    .step-subtitle { font-size: 0.85em; font-weight: 400; color: #666; margin-left: 8px; }
    
    .btn-group { display: flex; flex-wrap: wrap; gap: 16px; }
    button {
      padding: 16px 28px;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      background: #0a0a0a;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1.05em;
      font-weight: 600;
      color: #fff;
      min-height: 52px;
    }
    button:hover:not(:disabled) { background: #1a1a1a; border-color: #3a3a3a; transform: translateY(-1px); }
    button.active { background: #fff; color: #000; border-color: #fff; font-weight: 700; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    
    input[type="text"], textarea {
      width: 100%;
      margin-top: 20px;
      border-radius: 12px;
      border: 1px solid #2a2a2a;
      padding: 20px 24px;
      font-size: 1.1em;
      background: #0a0a0a;
      color: #fff;
      font-family: 'Noto Sans KR', sans-serif;
      font-weight: 500;
      transition: all 0.3s;
      line-height: 1.8;
    }
    input[type="text"]:focus, textarea:focus { outline: none; border-color: #3a3a3a; background: #0f0f0f; }
    input[type="text"]::placeholder, textarea::placeholder { color: #666; }
    textarea { min-height: 180px; resize: vertical; }
    
    .main-btn {
      width: 100%;
      padding: 28px;
      background: #fff;
      color: #000;
      border: none;
      border-radius: 12px;
      font-size: 1.4em;
      font-weight: 800;
      margin-top: 40px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 20px rgba(255,255,255,0.1);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .main-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(255,255,255,0.2); background: #f5f5f5; }
    .main-btn:disabled { background: #adb5bd; cursor: not-allowed; transform: none; }
    .main-btn.youtube-btn {
      background: linear-gradient(135deg, #FF0000 0%, #cc0000 100%);
      margin-top: 15px;
      color: white;
    }
    
    .error-message {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: white;
      padding: 20px 25px;
      border-radius: 15px;
      margin-top: 20px;
      display: none;
      box-shadow: 0 5px 20px rgba(255,107,107,0.3);
    }
    .error-message.show { display: block; }
    
    #result { margin-top: 50px; display: none; }
    .result-header {
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
      color: white;
      padding: 30px;
      border-radius: 20px 20px 0 0;
      text-align: center;
    }
    .result-header h2 { font-size: 2em; margin-bottom: 10px; }
    
    .copy-section { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; padding: 20px; background: white; }
    .copy-btn {
      background: linear-gradient(135deg, #4b6584 0%, #3d5266 100%);
      color: white;
      border: none;
      padding: 14px 24px;
      border-radius: 50px;
      font-size: 1em;
      cursor: pointer;
      flex: 1;
      min-width: 150px;
      font-weight: 600;
      transition: all 0.3s;
    }
    .copy-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(75,101,132,0.4); }
    .copy-btn.copied { background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%); }
    
    .output-box {
      white-space: pre-wrap;
      background: white;
      padding: 30px;
      border-radius: 0 0 20px 20px;
      line-height: 2;
      font-size: 1.05em;
      color: #333;
      max-height: 600px;
      overflow-y: auto;
    }
    
    /* ğŸµ 10ê³¡ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .songs-container { background: white; padding: 30px; }
    .song-card {
      background: #f5f5f5;
      border: 2px solid #e0e0e0;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      transition: all 0.3s;
    }
    .song-card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    .song-number { font-size: 1.2em; font-weight: 800; color: var(--gradient-start); margin-bottom: 15px; }
    .song-section { margin-bottom: 20px; }
    .song-section-title { font-weight: 700; color: #333; margin-bottom: 10px; font-size: 1.1em; }
    .song-section-content {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
      white-space: pre-wrap;
      font-size: 0.95em;
      line-height: 1.6;
      max-height: 300px;
      overflow-y: auto;
    }
    .song-buttons { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px; }
    .song-btn {
      flex: 1;
      min-width: 120px;
      padding: 10px 20px;
      background: var(--gradient-start);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    .song-btn:hover { transform: translateY(-2px); opacity: 0.9; }
    
    /* ğŸŒ 19ê°œ ì–¸ì–´ íƒ­ ìŠ¤íƒ€ì¼ */
    .language-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      background: #f0f0f0;
      padding: 20px;
      border-radius: 15px 15px 0 0;
      overflow-x: auto;
    }
    .lang-tab {
      padding: 12px 20px;
      background: white;
      border: 2px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      white-space: nowrap;
      font-size: 0.95em;
    }
    .lang-tab:hover { background: #f8f8f8; }
    .lang-tab.active { background: var(--gradient-start); color: white; border-color: var(--gradient-start); }
    
    .language-content {
      background: white;
      padding: 30px;
      border-radius: 0 0 15px 15px;
      display: none;
    }
    .language-content.active { display: block; }
    .lang-section {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #e0e0e0;
    }
    .lang-section-title { font-weight: 700; color: var(--gradient-start); margin-bottom: 15px; font-size: 1.2em; }
    .lang-section-content {
      white-space: pre-wrap;
      line-height: 1.8;
      color: #333;
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    .lang-copy-btn {
      margin-top: 10px;
      padding: 10px 20px;
      background: var(--gradient-end);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    .lang-copy-btn:hover { opacity: 0.9; transform: translateY(-2px); }
    
    .loading { text-align: center; padding: 50px; font-size: 1.2em; color: #666; }
    .loading::after { content: '...'; animation: dots 1.5s infinite; }
    @keyframes dots { 0%,20% { content: '.'; } 40% { content: '..'; } 60%,100% { content: '...'; } }
    
    @media (max-width: 768px) {
      h1 { font-size: 2.5em; }
      .step { padding: 25px; }
      .main-btn { font-size: 1.2em; padding: 20px; }
    }
  </style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„°</h1>
    <p class="subtitle">âœ¨ ì• ë‹ˆí•œ&ì–´ë¹„ Suno ai ìµìŠ¤í´ë£¨ì‹œë¸Œ âœ¨</p>
  </div>

  <button id="reset-btn">ğŸ”„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì„ íƒí•˜ê¸°</button>
  <div style="clear:both"></div>

  <div class="api-key-section">
    <h3>ğŸ”‘ Google AI Studio API í‚¤ ì„¤ì •</h3>
    <p>Google AI Studioì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”. <a href="https://aistudio.google.com/app/apikey" target="_blank">API í‚¤ ë°œê¸‰ë°›ê¸° â†’</a></p>
    <div class="api-input-group">
      <input type="password" id="api-key-input" placeholder="AIzaSy... í˜•ì‹ì˜ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      <button id="save-api-key-btn">ğŸ’¾ ì €ì¥</button>
    </div>
    <p class="api-status" id="api-status"></p>
  </div>

  <div class="instruction-box">
    <h3>ğŸ“Œ ì‚¬ìš© ì•ˆë‚´</h3>
    <ol>
      <li>ğŸ”‘ ìœ„ì— Google AI Studio API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ì„¸ìš”</li>
      <li>ğŸ¨ ì•„ë˜ ì˜µì…˜ë“¤ì„ ì„ íƒí•˜ê±°ë‚˜ í…ìŠ¤íŠ¸ë¡œ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”</li>
      <li>ğŸµ <strong>"í”„ë¡¬í”„íŠ¸ & ê°€ì‚¬ ìƒì„±í•˜ê¸°"</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ 1ê³¡ì„ ì™„ì„±í•©ë‹ˆë‹¤</li>
      <li>ğŸŒ <strong>"ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„±"</strong> ë²„íŠ¼ìœ¼ë¡œ 10ê³¡ + 19ê°œêµ­ì–´ ì—…ë¡œë“œ ì„¸íŠ¸ë¥¼ í•œë²ˆì— ìƒì„±í•˜ì„¸ìš”</li>
    </ol>
  </div>

  <div class="step">
    <span class="step-title">ğŸ¸ 1. ì¥ë¥´ ì„ íƒ <span class="step-subtitle">(ìŒì•…ì˜ ìƒ‰ê¹”)</span></span>
    <div class="btn-group" id="genre-btns"></div>
    <input type="text" id="custom-genre" placeholder="ì›í•˜ëŠ” ì¥ë¥´ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì–´ì¿ ìŠ¤í‹± í¬í¬, ì‹ ìŠ¤ì›¨ì´ë¸Œ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">âœ¨ 2. ë¶„ìœ„ê¸° ë° ê°ì„± ì„ íƒ <span class="step-subtitle">(ê°ì •ì˜ ê¹Šì´)</span></span>
    <div class="btn-group" id="mood-btns"></div>
    <input type="text" id="custom-mood" placeholder="ì›í•˜ëŠ” ë¶„ìœ„ê¸°ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ëª½í™˜ì ì¸, ì—­ë™ì ì¸ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸ¤ 3. ë³´ì»¬ ë° ì°½ë²• ì„ íƒ <span class="step-subtitle">(ëª©ì†Œë¦¬ì˜ ì§ˆê°)</span></span>
    <div class="btn-group" id="vocal-btns"></div>
    <input type="text" id="custom-vocal" placeholder="ì›í•˜ëŠ” ë³´ì»¬ ìŠ¤íƒ€ì¼ì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: í—ˆìŠ¤í‚¤í•œ ë‚¨ì„± ë³´ì»¬ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸ¬ 4. ì‚¬ìš© ìš©ë„ ë° ìƒí™© <span class="step-subtitle">(ê³µê°„ì˜ ìš¸ë¦¼)</span></span>
    <div class="btn-group" id="usage-btns"></div>
    <input type="text" id="custom-usage" placeholder="ì‚¬ìš© ìš©ë„ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ìœ íŠœë¸Œ ë¸Œì´ë¡œê·¸, ìš”ë¦¬ ë°°ê²½ìŒ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸ¹ 5. ì£¼ìš” ì•…ê¸° ì„¤ì • <span class="step-subtitle">(ì†Œë¦¬ì˜ ë„êµ¬)</span></span>
    <div class="btn-group" id="instrument-btns"></div>
    <input type="text" id="custom-instrument" placeholder="ì›í•˜ëŠ” ì•…ê¸°ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì‹±ì‰ë³¼, ì²¼ë¡œ, í•´ê¸ˆ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">âš¡ 6. ì†ë„ (BPM) ì„¤ì • <span class="step-subtitle">(ë¦¬ë“¬ì˜ ë§¥ë°•)</span></span>
    <div class="btn-group" id="bpm-btns"></div>
    <input type="text" id="custom-bpm" placeholder="ì›í•˜ëŠ” BPMì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 120 BPM, ë¹ ë¥¸ í…œí¬ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸ‘¥ 7. íƒ€ê²Ÿ ì—°ë ¹ëŒ€ ì„ íƒ <span class="step-subtitle">(ì²­ì¤‘ì˜ ê³µê°)</span></span>
    <div class="btn-group" id="age-group-btns"></div>
    <input type="text" id="custom-age" placeholder="íƒ€ê²Ÿ ì—°ë ¹ëŒ€ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ëŒ€í•™ìƒ, ì§ì¥ì¸ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸŒ 8. ê°€ì‚¬ ì–¸ì–´ ì„¤ì • <span class="step-subtitle">(ê¸€ë¡œë²Œ ì†Œí†µ)</span></span>
    <div class="btn-group" id="lang-btns"></div>
    <input type="text" id="custom-lang" placeholder="ì›í•˜ëŠ” ì–¸ì–´ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì¼ë³¸ì–´, ì¤‘êµ­ì–´ ë“±)">
  </div>

  <div class="step">
    <span class="step-title">ğŸ“ 9. ê°€ì‚¬ ì£¼ì œ ë° ìš”ì²­ <span class="step-subtitle">(ì°½ì‘ì˜ í•µì‹¬)</span></span>
    <div class="btn-group" id="theme-btns"></div>
    <textarea id="custom-theme" placeholder="ê°€ì‚¬ ì£¼ì œë¥¼ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”. (í•„ìˆ˜)
ì˜ˆ: í˜ë“  í•˜ë£¨ë¥¼ ë³´ë‚¸ ì§ì¥ì¸ì„ ìœ„ë¡œí•˜ëŠ” ë‚´ìš©
    ìƒˆë¡œìš´ ì‹œì‘ì„ ì‘ì›í•˜ëŠ” ë©”ì‹œì§€
    ê°€ì¡±ì— ëŒ€í•œ ê°ì‚¬
    ë“±ë“±"></textarea>
  </div>

  <div class="error-message" id="error-message"></div>

  <button class="main-btn" id="generate-btn">ğŸµ í”„ë¡¬í”„íŠ¸ & ê°€ì‚¬ ìƒì„±í•˜ê¸° (AI ìë™ ìƒì„±)</button>
  <button class="main-btn youtube-btn" id="youtube-btn">ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„±í•˜ê¸° (10ê³¡ + 19ê°œêµ­ì–´)</button>

  <div id="result">
    <div class="result-header">
      <h2 id="result-title">ğŸ¼ AI ìƒì„± ê²°ê³¼</h2>
      <p id="result-subtitle">Suno AIì— ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!</p>
    </div>
    <div class="copy-section">
      <button class="copy-btn" id="copy-all">ğŸ“‹ ì „ì²´ ë³µì‚¬</button>
    </div>
    <div class="output-box" id="output-content"></div>
  </div>
</div>

<script>
  const data = {
    genres: [
      "ğŸ¹ ì‹œí‹°íŒ(City Pop)", "ğŸ§ ë¡œíŒŒì´(Lo-fi)", "ğŸŒŠ ì¹ ì›¨ì´ë¸Œ", "ğŸ¸ K-ë¡", "ğŸ‘¥ í•©ì°½/ì¤‘ì°½",
      "ğŸ§˜ ëª…ìƒ/ì¹˜ìœ ", "âœï¸ CCM/ì°¬ì–‘", "ğŸ’« K-pop", "ğŸ’” ë°œë¼ë“œ", "ğŸº ì¬ì¦ˆ", "ğŸ¤ íŒ", "ğŸµ í™í•©",
      "ğŸŒŒ ë‰´ì—ì´ì§€", "ğŸŒ«ï¸ ì•°ë¹„ì–¸íŠ¸", "ğŸ¶ íŠ¸ë¡œíŠ¸", "ğŸ· ë¸”ë£¨ìŠ¤", "ğŸ¤  ì»¨íŠ¸ë¦¬", "ğŸª• í¬í¬", "ğŸï¸ ë ˆê²Œ",
      "âœ¨ ë””ìŠ¤ì½”", "ğŸ¸ ë¡", "ğŸ”Š ì „ììŒì•…", "ğŸ¼ R&B", "ğŸ¹ ì†Œìš¸", "ğŸ›ï¸ ì‹ ìŠ¤íŒ", "â˜ï¸ ë“œë¦¼ íŒ",
      "ğŸ¨ ì¸ë””íŒ", "ğŸ™ ê°€ìŠ¤í ", "ğŸº ìŠ¤ìœ™", "ğŸ’ƒ ë¼í‹´", "ğŸµ ì´ì§€ë¦¬ìŠ¤ë‹", "ğŸ‘¶ ìì¥ê°€", "ğŸ§¸ ë™ìš”", "ğŸ„ ìºë¡¤"
    ],
    moods: [
      "ğŸŒ™ ì”ì”í•œ (ê³ ìš”í•œ)", "ğŸ˜¢ ê¹Šì€ ìŠ¬í””", "ğŸŒƒ ìš°ìš¸í•œ ìƒˆë²½", "ğŸ™ ê²½ê±´í•˜ê³  ì€í˜œë¡œìš´",
      "ğŸ¤— ë”°ìŠ¤í•œ ìœ„ë¡œ", "â˜®ï¸ ìˆœìˆ˜í•œ í‰í™”", "â˜ï¸ í¬ê·¼í•œ êµ¬ë¦„", "âš¡ ì—ë„ˆì§€ í­ë°œ",
      "ğŸ’• ë¡œë§¨í‹± ê°ì„±", "ğŸŒ… ì¼ëª°ê°™ì€", "ğŸŒŒ ìš°ì£¼ ê°™ì€", "ğŸ–¤ ë‹¤í¬í•˜ê³  ê°•ë ¬",
      "ğŸƒ ì‹œì›í•œ ë°”ëŒ", "ğŸš— ê°•ë ¥í•œ ë“œë¼ì´ë¸Œ", "ğŸ’ª ë„ì „ì ì¸", "ğŸ”ï¸ ì›…ì¥í•œ ëŒ€ì„œì‚¬ì‹œ", "ğŸ¥° ê·€ì—¬ìš´"
    ],
    vocals: [
      "ğŸ‘¶ ì–´ë¦°ì´ í•©ì°½ë‹¨", "ğŸ‘¥ ì–´ë¥¸ í•©ì°½ë‹¨", "ğŸ‘© ë§‘ê³  ê¹¨ë—í•œ ì—¬ì„± ë³´ì»¬",
      "âœ¨ ì—í…Œë¦¬ì–¼ ì—¬ì„± ë³´ì»¬", "ğŸ’• ë¡œë§¨í‹± ì—¬ì„± ë³´ì»¬", "ğŸ™ï¸ í—ˆìŠ¤í‚¤ ë‚¨ì„± ë³´ì»¬",
      "ğŸ‘¦ ì†Œë…„ ë³´ì»¬", "ğŸ‘§ ë§‘ì€ ì†Œë…€ ë³´ì»¬", "ğŸ”¥ ì—´ì •ì ì¸ ë‚¨ì„± ë³´ì»¬",
      "ğŸµ ë‚¨ë…€ ì½”ëŸ¬ìŠ¤ í•©ì°½", "ğŸ¤– ë³´ì½”ë” íš¨ê³¼", "ğŸ¤« ì†ì‚­ì´ëŠ” ì—¬ì„±",
      "ğŸ¤ ë© (ë‚¨ì„±)", "ğŸ¤ ë© (ì—¬ì„±)", "ğŸ­ ì˜¤í˜ë¼í‹± (ë‚¨ì„±)", "ğŸ­ ì˜¤í˜ë¼í‹± (ì—¬ì„±)",
      "ğŸŒ¬ï¸ ê³µê¸°ë°˜ ì‚¬ìš´ë“œë°˜", "ğŸ¼ ê°€ì‚¬ì—†ëŠ” ì—°ì£¼ê³¡"
    ],
    usages: [
      "ğŸ“¹ ìœ íŠœë¸Œ ë¸Œì´ë¡œê·¸ BGM", "ğŸ® ê²Œì„ ë°©ì†¡ ë°°ê²½ìŒ", "ğŸ“š ê³µë¶€/ì§‘ì¤‘ë ¥ í–¥ìƒ",
      "ğŸ’ª ìš´ë™/í”¼íŠ¸ë‹ˆìŠ¤", "ğŸ˜´ ìˆ™ë©´/ëª…ìƒ", "â˜• ì¹´í˜ ë¶„ìœ„ê¸°", "ğŸ“± ê°ì„± ì‡¼ì¸ /í‹±í†¡", "â›ª êµíšŒ ì˜ˆë°°/ë¬µìƒ"
    ],
    instruments: [
      "ğŸ¹ ê·¸ëœë“œ í”¼ì•„ë…¸", "ğŸ¸ ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€", "âš¡ ì¼ë ‰ ê¸°íƒ€", "ğŸµ ì˜¤ë¥´ê³¨", "ğŸ· ìƒ‰ì†Œí°",
      "ğŸ» ë°”ì´ì˜¬ë¦°", "ğŸ» ì²¼ë¡œ", "ğŸ”” ì‹±ì‰ë³¼", "ğŸ›ï¸ ì‹ ë””ì‚¬ì´ì €"
    ],
    bpms: [
      "ğŸ˜´ ì´ˆì €ì† (40-50 BPM)", "ğŸŒ™ ë§¤ìš° ëŠë¦¼ (50-70 BPM)", "ğŸ§˜ ëŠë¦¼ (70-90 BPM)",
      "ğŸš¶ ë³´í†µ (90-110 BPM)", "ğŸ˜Š ì•½ê°„ ë¹ ë¦„ (110-130 BPM)", "ğŸƒ ë¹ ë¦„ (130-150 BPM)",
      "ğŸ’ª ë§¤ìš° ë¹ ë¦„ (150-170 BPM)", "âš¡ ì´ˆê³ ì† (170+ BPM)"
    ],
    langs: ["ğŸ‡°ğŸ‡· í•œêµ­ì–´", "ğŸ‡ºğŸ‡¸ ì˜ì–´", "ğŸŒ í•œêµ­ì–´+ì˜ì–´ ì„ì–´ì„œ"],
    ageGroups: [
      "ğŸ‘¶ ìœ ì•„ (0-7ì„¸)", "ğŸ’ 10ëŒ€ (ì²­ì†Œë…„)", "ğŸ’¼ 20ëŒ€ (ì²­ì¶˜)",
      "ğŸ‘” 30-40ëŒ€ (ì§ì¥ì¸/ë¶€ëª¨)", "ğŸ© 50-60ëŒ€ (ì‹œë‹ˆì–´)", "ğŸŒ ì „ ì—°ë ¹ëŒ€"
    ],
    themes: [
      "ğŸ’• ì²«ì‚¬ë‘", "ğŸ‘¶ ìì¥ê°€", "ğŸŒ… ìƒˆë²½ ë¬µìƒ", "ğŸ’” ì´ë³„ì˜ ì•„í””", "ğŸ¤ ì¬íšŒ", "ğŸ˜Š ì§ì‚¬ë‘",
      "ğŸ’ª ìê¸° ì‚¬ë‘", "ğŸ”¥ ìš©ê¸°", "âœ¨ ê°“ìƒ", "ğŸ‘¤ ì£¼ì²´ì  ë‚˜", "ğŸ¯ ì‹¤íŒ¨ì™€ ê·¹ë³µ",
      "ğŸ’ ìì‹ ê° íšŒë³µ", "ğŸ  í–¥ìˆ˜", "ğŸŒ§ï¸ ë¹„ ì˜¤ëŠ” ë‚ ", "âœˆï¸ ì—¬í–‰", "ğŸ™ ê°ì‚¬ì™€ ê¸°ë„",
      "ğŸ¼ ê°€ì‚¬ì—†ëŠ”(ì—°ì£¼ê³¡)", "ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤"
    ]
  };

  const selections = {
    genre: null, mood: null, vocal: null, usage: null, instrument: null,
    bpm: null, ageGroup: null, lang: null, theme: null
  };

  let generatedPrompt = "";
  let apiKey = localStorage.getItem('gemini_api_key') || '';

  const PREFERRED_MODELS = [
    "gemini-1.5-flash",
    "gemini-1.5-pro",
    "gemini-2.0-flash-exp",
    "gemini-2.0-pro"
  ];

  if (apiKey) {
    document.getElementById('api-key-input').value = apiKey;
    const statusDiv = document.getElementById('api-status');
    statusDiv.className = 'api-status success';
    statusDiv.textContent = 'âœ… ì €ì¥ëœ API í‚¤ê°€ ìˆìŠµë‹ˆë‹¤.';
  }

  function showStatus(type, html) {
    const statusDiv = document.getElementById('api-status');
    statusDiv.className = 'api-status ' + type;
    statusDiv.style.display = 'block';
    statusDiv.innerHTML = html;
  }

  async function listModels(key) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models?key=${encodeURIComponent(key)}`;
    const res = await fetch(url, { method: 'GET' });
    const text = await res.text();
    if (!res.ok) throw new Error(text || `ListModels ì‹¤íŒ¨ (${res.status})`);
    const data = JSON.parse(text);
    return (data.models || []).map(m => m.name?.replace("models/", "")).filter(Boolean);
  }

  function pickBestModel(available) {
    for (const m of PREFERRED_MODELS) {
      if (available.includes(m)) return m;
    }
    return available.find(x => x.startsWith("gemini-")) || null;
  }

  document.getElementById('save-api-key-btn').addEventListener('click', async function () {
    const key = document.getElementById('api-key-input').value.trim();
    if (!key) return showStatus('error', 'âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    if (!key.startsWith('AIzaSy')) return showStatus('error', 'âŒ ì˜¬ë°”ë¥¸ API í‚¤ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
    if (key.length < 30) return showStatus('error', 'âŒ API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤.');

    showStatus('', 'ğŸ”„ API í‚¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¤‘...');

    try {
      const availableModels = await listModels(key);
      const chosenModel = pickBestModel(availableModels);
      if (!chosenModel) {
        return showStatus('error', 'âŒ ì‚¬ìš© ê°€ëŠ¥í•œ Gemini ëª¨ë¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br/>AI Studioì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¡œ í‚¤ë¥¼ ë‹¤ì‹œ ë°œê¸‰í•´ë³´ì„¸ìš”.');
      }

      const testUrl = `https://generativelanguage.googleapis.com/v1beta/models/${encodeURIComponent(chosenModel)}:generateContent?key=${encodeURIComponent(key)}`;
      const testResponse = await fetch(testUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ contents: [{ parts: [{ text: "Hello" }] }] })
      });

      const responseText = await testResponse.text();

      if (testResponse.ok) {
        apiKey = key;
        localStorage.setItem('gemini_api_key', key);
        localStorage.setItem('gemini_model', chosenModel);
        showStatus('success', `âœ… API í‚¤ í…ŒìŠ¤íŠ¸ ì„±ê³µ!<br/>âœ… ì„ íƒëœ ëª¨ë¸: <strong>${chosenModel}</strong><br/>ì´ì œ ê°€ì‚¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
      } else {
        if (testResponse.status === 429) {
          showStatus('error', 'âŒ í• ë‹¹ëŸ‰ ì´ˆê³¼ (429)<br/><br/>1ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„ ë˜ëŠ” ê²°ì œ ê³„ì • ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        } else {
          showStatus('error', `âŒ API í‚¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ (${testResponse.status})<br/><br/>${responseText.slice(0, 500)}`);
        }
      }
    } catch (err) {
      showStatus('error', `âŒ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ<br/><br/>${String(err).slice(0, 500)}`);
    }

    setTimeout(() => {
      const statusDiv = document.getElementById('api-status');
      if (statusDiv.className.includes('success')) statusDiv.style.display = 'none';
    }, 10000);
  });

  async function callGeminiAPI(promptText) {
    if (!apiKey) throw new Error('ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');

    let model = localStorage.getItem('gemini_model') || '';
    if (!model) {
      const available = await listModels(apiKey);
      model = pickBestModel(available);
      if (!model) throw new Error('ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
      localStorage.setItem('gemini_model', model);
    }

    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${encodeURIComponent(model)}:generateContent?key=${encodeURIComponent(apiKey)}`;
    const response = await fetch(apiUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        contents: [{ parts: [{ text: promptText }] }],
        generationConfig: { temperature: 0.9, topK: 40, topP: 0.95, maxOutputTokens: 8192 }
      })
    });

    const text = await response.text();
    if (!response.ok) {
      if (response.status === 429) {
        throw new Error('âŒ í• ë‹¹ëŸ‰ ì´ˆê³¼ (429)\n\n1ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„í•˜ê±°ë‚˜ ê²°ì œ ê³„ì •ì„ ì—°ê²°í•˜ì„¸ìš”.');
      }
      throw new Error(`âŒ API í˜¸ì¶œ ì‹¤íŒ¨ (${response.status})\n\n${text.slice(0, 1000)}`);
    }

    const data = JSON.parse(text);
    if (!data.candidates?.[0]?.content?.parts?.[0]?.text) {
      throw new Error('âŒ AI ì‘ë‹µ í˜•ì‹ ì˜¤ë¥˜');
    }

    return data.candidates[0].content.parts[0].text;
  }

  function initButtonGroup(containerId, itemList, selectionKey) {
    const container = document.getElementById(containerId);
    itemList.forEach(item => {
      const button = document.createElement('button');
      button.innerText = item;
      if (item === selections[selectionKey]) button.classList.add('active');
      button.onclick = () => {
        Array.from(container.children).forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        selections[selectionKey] = item;
        hideError();
      };
      container.appendChild(button);
    });
  }

  function validateSelections() {
    const errors = [];
    const genre = document.getElementById('custom-genre').value.trim() || selections.genre;
    const mood = document.getElementById('custom-mood').value.trim() || selections.mood;
    const vocal = document.getElementById('custom-vocal').value.trim() || selections.vocal;
    const ageGroup = document.getElementById('custom-age').value.trim() || selections.ageGroup;
    const lang = document.getElementById('custom-lang').value.trim() || selections.lang;
    const theme = document.getElementById('custom-theme').value.trim() || selections.theme;

    if (!genre) errors.push('ğŸ¸ ì¥ë¥´');
    if (!mood) errors.push('âœ¨ ë¶„ìœ„ê¸°');
    if (!vocal) errors.push('ğŸ¤ ë³´ì»¬');
    if (!ageGroup) errors.push('ğŸ‘¥ íƒ€ê²Ÿ ì—°ë ¹ëŒ€');
    if (!lang) errors.push('ğŸŒ ì–¸ì–´');
    if (!theme) errors.push('ğŸ“ ê°€ì‚¬ ì£¼ì œ');

    return errors;
  }

  function showError(message) {
    const errorDiv = document.getElementById('error-message');
    errorDiv.textContent = message;
    errorDiv.classList.add('show');
    errorDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }

  function hideError() {
    document.getElementById('error-message').classList.remove('show');
  }

  async function copyToClipboard(text, buttonElement) {
    if (!text || text.trim() === '') {
      alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }
    try {
      await navigator.clipboard.writeText(text);
      const originalText = buttonElement.textContent;
      buttonElement.classList.add('copied');
      buttonElement.textContent = 'âœ“ ë³µì‚¬ ì™„ë£Œ!';
      setTimeout(() => {
        buttonElement.classList.remove('copied');
        buttonElement.textContent = originalText;
      }, 2000);
    } catch (err) {
      alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
    }
  }

  function resetAll() {
    if (!confirm('ëª¨ë“  ì„ íƒì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    Object.keys(selections).forEach(key => selections[key] = null);
    document.querySelectorAll('.btn-group button').forEach(btn => btn.classList.remove('active'));
    
    ['custom-genre', 'custom-mood', 'custom-vocal', 'custom-usage', 'custom-instrument', 
     'custom-bpm', 'custom-age', 'custom-lang', 'custom-theme'].forEach(id => {
      document.getElementById(id).value = '';
    });

    document.getElementById('result').style.display = 'none';
    hideError();
    generatedPrompt = '';
    window.scrollTo({ top: 0, behavior: 'smooth' });
    setTimeout(() => alert('âœ… ëª¨ë“  ì„ íƒì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.'), 300);
  }

  function getSelectionValue(key, customId) {
    const customValue = document.getElementById(customId).value.trim();
    return customValue || selections[key] || "ììœ ë¡­ê²Œ";
  }

  function generatePromptText() {
    const genre = getSelectionValue('genre', 'custom-genre');
    const mood = getSelectionValue('mood', 'custom-mood');
    const vocal = getSelectionValue('vocal', 'custom-vocal');
    const usage = getSelectionValue('usage', 'custom-usage');
    const instrument = getSelectionValue('instrument', 'custom-instrument');
    const bpm = getSelectionValue('bpm', 'custom-bpm');
    const ageGroup = getSelectionValue('ageGroup', 'custom-age');
    const lang = getSelectionValue('lang', 'custom-lang');
    const theme = document.getElementById('custom-theme').value.trim() || selections.theme;

    return `[ëª…ë ¹ì–´] 
Suno AIë¥¼ ìœ„í•œ ë…¸ë˜ ì œëª©, Style Tag, í’€ë²„ì „ ê°€ì‚¬ë¥¼ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

ì œëª©: [ì—¬ê¸°ì— ì œëª©]
ìŠ¤íƒ€ì¼: [ì—¬ê¸°ì— ì˜ë¬¸ íƒœê·¸]
ê°€ì‚¬: [ì—¬ê¸°ì— ê°€ì‚¬ ì „ì²´]

[ì¡°ê±´]
- íƒ€ê²Ÿ ì—°ë ¹ëŒ€: ${ageGroup}
- ìš©ë„: ${usage}
- ì¥ë¥´: ${genre}
- ë¶„ìœ„ê¸°: ${mood}
- ë³´ì»¬: ${vocal}
- ì£¼ìš” ì•…ê¸°: ${instrument}
- ì†ë„(BPM): ${bpm}
- ê°€ì‚¬ ì–¸ì–´: ${lang}
- ì£¼ì œ: ${theme}

[ê°€ì‚¬ êµ¬ì¡°]: 4ë¶„ ë¶„ëŸ‰ì˜ í’€ë²„ì „
- [Intro] 
- [Verse 1] 
- [Pre-Chorus] 
- [Chorus] 
- [Instrumental Solo] 
- [Verse 2] 
- [Pre-Chorus] 
- [Chorus] 
- [Bridge] 
- [Final Chorus] 
- [Outro]

ë°˜ë“œì‹œ ìœ„ í˜•ì‹(ì œëª©: / ìŠ¤íƒ€ì¼: / ê°€ì‚¬:)ì„ ì •í™•íˆ ì§€ì¼œì£¼ì„¸ìš”.`;
  }

  function generateYoutubePrompt() {
    const genre = getSelectionValue('genre', 'custom-genre');
    const mood = getSelectionValue('mood', 'custom-mood');
    const vocal = getSelectionValue('vocal', 'custom-vocal');
    const usage = getSelectionValue('usage', 'custom-usage');
    const instrument = getSelectionValue('instrument', 'custom-instrument');
    const bpm = getSelectionValue('bpm', 'custom-bpm');
    const ageGroup = getSelectionValue('ageGroup', 'custom-age');
    const lang = getSelectionValue('lang', 'custom-lang');
    const theme = document.getElementById('custom-theme').value.trim() || selections.theme;

    return `[ë¯¸ì…˜]
ìœ íŠœë¸Œ ìŒì•… ì±„ë„ìš© ê¸€ë¡œë²Œ ì—…ë¡œë“œ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

[ì„ íƒëœ ë³€ìˆ˜]
- íƒ€ê²Ÿ ì—°ë ¹ëŒ€: ${ageGroup}
- ì¥ë¥´: ${genre}
- ë¶„ìœ„ê¸°: ${mood}
- ë³´ì»¬: ${vocal}
- ìš©ë„: ${usage}
- ì•…ê¸°: ${instrument}
- ì†ë„(BPM): ${bpm}
- ê°€ì‚¬ ì–¸ì–´: ${lang}
- ì£¼ì œ: ${theme}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ PART 1: 10ê³¡ ê°œë³„ í”„ë¡¬í”„íŠ¸ ìƒì„±
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ğŸµ ê³¡ 1:**
ì œëª©: [ì—¬ê¸°]
ìŠ¤íƒ€ì¼: [ì—¬ê¸°]
ê°€ì‚¬: [4ë¶„ í’€ë²„ì „]

**ğŸµ ê³¡ 2:**
(ë™ì¼ í˜•ì‹ìœ¼ë¡œ 10ê³¡ê¹Œì§€)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ PART 2: 19ê°œ êµ­ì–´ ìœ íŠœë¸Œ ì—…ë¡œë“œ ì„¸íŠ¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### ğŸ‡°ğŸ‡· í•œêµ­ì–´
ğŸ“Œ ì˜ìƒ ì œëª©: [ì—¬ê¸°]
ğŸ“ ì„¤ëª…: [ì—¬ê¸°]
â±ï¸ íƒ€ì„ìŠ¤íƒ¬í”„:
00:00 ê³¡1
04:15 ê³¡2
(10ê³¡ê¹Œì§€)
#ï¸âƒ£ í•´ì‹œíƒœê·¸: [ì—¬ê¸°]

(ì´ì–´ì„œ ğŸ‡ºğŸ‡¸ English, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª, ğŸ‡ªğŸ‡¸ EspaÃ±ol, ğŸ‡§ğŸ‡· PortuguÃªs, ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€, ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç®€ä½“, ğŸ‡¹ğŸ‡¼ ä¸­æ–‡ç¹é«”, ğŸ‡«ğŸ‡· FranÃ§ais, ğŸ‡©ğŸ‡ª Deutsch, ğŸ‡®ğŸ‡¹ Italiano, ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹, ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢, ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©, ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e, ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t, ğŸ‡®ğŸ‡© Bahasa Indonesia, ğŸ‡µğŸ‡± Polski, ğŸ‡³ğŸ‡± Nederlands, ğŸ‡¸ğŸ‡ª Svenska ë™ì¼ í˜•ì‹)

ìœ„ í˜•ì‹ì„ ì •í™•íˆ ì§€ì¼œì„œ ì „ì²´ íŒ¨í‚¤ì§€ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.`;
  }

  // ğŸµ 10ê³¡ íŒŒì‹± í•¨ìˆ˜
  function parse10Songs(text) {
    const songs = [];
    const songRegex = /\*\*ğŸµ ê³¡ (\d+):\*\*\s*ì œëª©:\s*(.+?)\s*ìŠ¤íƒ€ì¼:\s*(.+?)\s*ê°€ì‚¬:\s*([\s\S]+?)(?=\*\*ğŸµ ê³¡ \d+:|â”â”â”â”|$)/gi;
    
    let match;
    while ((match = songRegex.exec(text)) !== null) {
      songs.push({
        number: match[1],
        title: match[2].trim(),
        style: match[3].trim(),
        lyrics: match[4].trim()
      });
    }
    
    return songs;
  }

  // ğŸŒ 19ê°œ ì–¸ì–´ íŒŒì‹± í•¨ìˆ˜
  function parseLanguages(text) {
    const languages = [];
    const langMap = {
      'ğŸ‡°ğŸ‡·': 'í•œêµ­ì–´', 'ğŸ‡ºğŸ‡¸': 'English', 'ğŸ‡¯ğŸ‡µ': 'æ—¥æœ¬èª', 'ğŸ‡ªğŸ‡¸': 'EspaÃ±ol',
      'ğŸ‡§ğŸ‡·': 'PortuguÃªs', 'ğŸ‡®ğŸ‡³': 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', 'ğŸ‡¨ğŸ‡³': 'ä¸­æ–‡ç®€ä½“', 'ğŸ‡¹ğŸ‡¼': 'ä¸­æ–‡ç¹é«”',
      'ğŸ‡«ğŸ‡·': 'FranÃ§ais', 'ğŸ‡©ğŸ‡ª': 'Deutsch', 'ğŸ‡®ğŸ‡¹': 'Italiano', 'ğŸ‡·ğŸ‡º': 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
      'ğŸ‡¹ğŸ‡­': 'à¹„à¸—à¸¢', 'ğŸ‡¸ğŸ‡¦': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', 'ğŸ‡¹ğŸ‡·': 'TÃ¼rkÃ§e', 'ğŸ‡»ğŸ‡³': 'Tiáº¿ng Viá»‡t',
      'ğŸ‡®ğŸ‡©': 'Bahasa Indonesia', 'ğŸ‡µğŸ‡±': 'Polski', 'ğŸ‡³ğŸ‡±': 'Nederlands', 'ğŸ‡¸ğŸ‡ª': 'Svenska'
    };

    for (const [flag, name] of Object.entries(langMap)) {
      const regex = new RegExp(`###\\s*${flag}\\s*${name}([\\s\\S]+?)(?=###\\s*ğŸ‡°ğŸ‡·|###\\s*ğŸ‡ºğŸ‡¸|###\\s*ğŸ‡¯ğŸ‡µ|###\\s*ğŸ‡ªğŸ‡¸|###\\s*ğŸ‡§ğŸ‡·|###\\s*ğŸ‡®ğŸ‡³|###\\s*ğŸ‡¨ğŸ‡³|###\\s*ğŸ‡¹ğŸ‡¼|###\\s*ğŸ‡«ğŸ‡·|###\\s*ğŸ‡©ğŸ‡ª|###\\s*ğŸ‡®ğŸ‡¹|###\\s*ğŸ‡·ğŸ‡º|###\\s*ğŸ‡¹ğŸ‡­|###\\s*ğŸ‡¸ğŸ‡¦|###\\s*ğŸ‡¹ğŸ‡·|###\\s*ğŸ‡»ğŸ‡³|###\\s*ğŸ‡®ğŸ‡©|###\\s*ğŸ‡µğŸ‡±|###\\s*ğŸ‡³ğŸ‡±|###\\s*ğŸ‡¸ğŸ‡ª|$)`, 'i');
      const match = text.match(regex);
      
      if (match) {
        const content = match[1].trim();
        const titleMatch = content.match(/ğŸ“Œ\s*ì˜ìƒ ì œëª©:\s*(.+?)(?=\n|$)/);
        const descMatch = content.match(/ğŸ“\s*(?:ì„¤ëª…|ì˜ìƒ ì„¤ëª…ë€|Description):\s*([\s\S]+?)(?=â±ï¸|#ï¸âƒ£|$)/);
        const timeMatch = content.match(/â±ï¸\s*íƒ€ì„ìŠ¤íƒ¬í”„:?\s*([\s\S]+?)(?=#ï¸âƒ£|$)/);
        const hashMatch = content.match(/#ï¸âƒ£\s*í•´ì‹œíƒœê·¸:?\s*(.+?)$/);

        languages.push({
          flag,
          name,
          title: titleMatch ? titleMatch[1].trim() : '',
          description: descMatch ? descMatch[1].trim() : '',
          timestamps: timeMatch ? timeMatch[1].trim() : '',
          hashtags: hashMatch ? hashMatch[1].trim() : '',
          fullContent: content
        });
      }
    }

    return languages;
  }

  // ğŸµ 10ê³¡ ì¹´ë“œ UI ìƒì„±
  function display10Songs(songs) {
    const container = document.createElement('div');
    container.className = 'songs-container';
    
    songs.forEach(song => {
      const card = document.createElement('div');
      card.className = 'song-card';
      
      card.innerHTML = `
        <div class="song-number">ğŸµ ê³¡ ${song.number}</div>
        
        <div class="song-section">
          <div class="song-section-title">ğŸ“Œ ì œëª©</div>
          <div class="song-section-content">${song.title}</div>
        </div>
        
        <div class="song-section">
          <div class="song-section-title">ğŸ¸ ìŠ¤íƒ€ì¼ íƒœê·¸</div>
          <div class="song-section-content">${song.style}</div>
        </div>
        
        <div class="song-section">
          <div class="song-section-title">ğŸ“ ê°€ì‚¬ (4ë¶„ í’€ë²„ì „)</div>
          <div class="song-section-content">${song.lyrics}</div>
        </div>
        
        <div class="song-buttons">
          <button class="song-btn copy-title" data-text="${song.title}">ğŸ“‹ ì œëª© ë³µì‚¬</button>
          <button class="song-btn copy-style" data-text="${song.style}">ğŸ¸ ìŠ¤íƒ€ì¼ ë³µì‚¬</button>
          <button class="song-btn copy-lyrics" data-text="${song.lyrics}">ğŸ“ ê°€ì‚¬ ë³µì‚¬</button>
          <button class="song-btn copy-all-song" data-text="ì œëª©: ${song.title}\nìŠ¤íƒ€ì¼: ${song.style}\nê°€ì‚¬: ${song.lyrics}">ğŸ“¦ ì „ì²´ ë³µì‚¬</button>
        </div>
      `;
      
      container.appendChild(card);
    });
    
    // ë³µì‚¬ ì´ë²¤íŠ¸ ì—°ê²°
    container.querySelectorAll('.song-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        copyToClipboard(this.dataset.text, this);
      });
    });
    
    return container;
  }

  // ğŸŒ 19ê°œ ì–¸ì–´ íƒ­ UI ìƒì„±
  function displayLanguages(languages) {
    const container = document.createElement('div');
    
    // íƒ­ ë²„íŠ¼
    const tabsContainer = document.createElement('div');
    tabsContainer.className = 'language-tabs';
    
    // ê° ì–¸ì–´ë³„ ì»¨í…ì¸ 
    const contentsContainer = document.createElement('div');
    
    languages.forEach((lang, index) => {
      // íƒ­ ë²„íŠ¼
      const tab = document.createElement('div');
      tab.className = 'lang-tab' + (index === 0 ? ' active' : '');
      tab.textContent = `${lang.flag} ${lang.name}`;
      tab.onclick = () => {
        document.querySelectorAll('.lang-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.language-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        content.classList.add('active');
      };
      tabsContainer.appendChild(tab);
      
      // ì–¸ì–´ë³„ ì»¨í…ì¸ 
      const content = document.createElement('div');
      content.className = 'language-content' + (index === 0 ? ' active' : '');
      
      content.innerHTML = `
        <div class="lang-section">
          <div class="lang-section-title">ğŸ“Œ ì˜ìƒ ì œëª©</div>
          <div class="lang-section-content">${lang.title}</div>
          <button class="lang-copy-btn" data-text="${lang.title}">ë³µì‚¬</button>
        </div>
        
        <div class="lang-section">
          <div class="lang-section-title">ğŸ“ ì˜ìƒ ì„¤ëª…ë€</div>
          <div class="lang-section-content">${lang.description}</div>
          <button class="lang-copy-btn" data-text="${lang.description}">ë³µì‚¬</button>
        </div>
        
        <div class="lang-section">
          <div class="lang-section-title">â±ï¸ íƒ€ì„ìŠ¤íƒ¬í”„</div>
          <div class="lang-section-content">${lang.timestamps}</div>
          <button class="lang-copy-btn" data-text="${lang.timestamps}">ë³µì‚¬</button>
        </div>
        
        <div class="lang-section">
          <div class="lang-section-title">#ï¸âƒ£ í•´ì‹œíƒœê·¸</div>
          <div class="lang-section-content">${lang.hashtags}</div>
          <button class="lang-copy-btn" data-text="${lang.hashtags}">ë³µì‚¬</button>
        </div>
        
        <div class="lang-section">
          <button class="lang-copy-btn" style="width:100%; font-size:1.1em; padding:15px;" data-text="${lang.fullContent}">ğŸ“¦ ì´ ì–¸ì–´ ì „ì²´ ë³µì‚¬</button>
        </div>
      `;
      
      contentsContainer.appendChild(content);
    });
    
    container.appendChild(tabsContainer);
    container.appendChild(contentsContainer);
    
    // ë³µì‚¬ ì´ë²¤íŠ¸ ì—°ê²°
    container.querySelectorAll('.lang-copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        copyToClipboard(this.dataset.text, this);
      });
    });
    
    return container;
  }

  async function handleGenerate() {
    if (!apiKey) {
      showError('âŒ ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”!');
      document.getElementById('api-key-input').focus();
      return;
    }

    const errors = validateSelections();
    if (errors.length > 0) {
      showError(`âŒ ë‹¤ìŒ í•­ëª©ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”:\n\n${errors.join('\n')}`);
      return;
    }

    hideError();

    const generateBtn = document.getElementById('generate-btn');
    const originalText = generateBtn.textContent;
    generateBtn.disabled = true;
    generateBtn.textContent = 'ğŸµ AIê°€ ê°€ì‚¬ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...';

    const resultDiv = document.getElementById('result');
    const outputContent = document.getElementById('output-content');
    document.getElementById('result-title').textContent = 'ğŸ¼ AIê°€ ê°€ì‚¬ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
    document.getElementById('result-subtitle').textContent = 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš” â³';
    outputContent.innerHTML = '<div class="loading">ì™„ë²½í•œ ê°€ì‚¬ë¥¼ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤</div>';
    resultDiv.style.display = 'block';

    try {
      const promptText = generatePromptText();
      const result = await callGeminiAPI(promptText);

      generatedPrompt = result;
      document.getElementById('result-title').textContent = 'ğŸ¼ AI ìƒì„± ì™„ë£Œ!';
      document.getElementById('result-subtitle').textContent = 'Suno AIì— ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!';
      outputContent.textContent = result;

      setTimeout(() => resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    } catch (error) {
      document.getElementById('result-title').textContent = 'âŒ ì˜¤ë¥˜ ë°œìƒ';
      document.getElementById('result-subtitle').textContent = 'ì•„ë˜ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
      outputContent.textContent = error.message;
      showError(error.message);
    } finally {
      generateBtn.disabled = false;
      generateBtn.textContent = originalText;
    }
  }

  async function handleYoutubeGenerate() {
    if (!apiKey) {
      showError('âŒ ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”!');
      document.getElementById('api-key-input').focus();
      return;
    }

    const errors = validateSelections();
    if (errors.length > 0) {
      showError(`âŒ ë‹¤ìŒ í•­ëª©ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”:\n\n${errors.join('\n')}`);
      return;
    }

    hideError();

    const youtubeBtn = document.getElementById('youtube-btn');
    const originalText = youtubeBtn.textContent;
    youtubeBtn.disabled = true;
    youtubeBtn.textContent = 'ğŸŒ 10ê³¡ + 19ê°œêµ­ì–´ ìƒì„± ì¤‘...';

    const resultDiv = document.getElementById('result');
    const outputContent = document.getElementById('output-content');
    document.getElementById('result-title').textContent = 'ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„± ì¤‘...';
    document.getElementById('result-subtitle').textContent = '10ê³¡ + 19ê°œ êµ­ì–´ ë²ˆì—­ ì¤‘ â³';
    outputContent.innerHTML = '<div class="loading">ì™„ë²½í•œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤</div>';
    resultDiv.style.display = 'block';

    try {
      const youtubePrompt = generateYoutubePrompt();
      const result = await callGeminiAPI(youtubePrompt);

      generatedPrompt = result;
      
      // ğŸµ 10ê³¡ íŒŒì‹±
      const songs = parse10Songs(result);
      
      // ğŸŒ 19ê°œ ì–¸ì–´ íŒŒì‹±
      const languages = parseLanguages(result);
      
      document.getElementById('result-title').textContent = 'ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ì™„ì„±!';
      document.getElementById('result-subtitle').textContent = `${songs.length}ê³¡ + ${languages.length}ê°œ ì–¸ì–´ ì—…ë¡œë“œ ì„¸íŠ¸`;
      
      // UI ìƒì„±
      outputContent.innerHTML = '';
      
      if (songs.length > 0) {
        const songsTitle = document.createElement('h2');
        songsTitle.style.cssText = 'background:#667eea; color:white; padding:20px; margin:0; font-size:1.8em;';
        songsTitle.textContent = 'ğŸµ 10ê³¡ í”„ë¡¬í”„íŠ¸ ì„¸íŠ¸';
        outputContent.appendChild(songsTitle);
        outputContent.appendChild(display10Songs(songs));
      }
      
      if (languages.length > 0) {
        const langsTitle = document.createElement('h2');
        langsTitle.style.cssText = 'background:#764ba2; color:white; padding:20px; margin:20px 0 0 0; font-size:1.8em;';
        langsTitle.textContent = `ğŸŒ ${languages.length}ê°œ ì–¸ì–´ ìœ íŠœë¸Œ ì—…ë¡œë“œ ì„¸íŠ¸`;
        outputContent.appendChild(langsTitle);
        outputContent.appendChild(displayLanguages(languages));
      }
      
      if (songs.length === 0 && languages.length === 0) {
        outputContent.innerHTML = `
          <div style="padding:30px;">
            <h3 style="color:#f093fb; margin-bottom:20px;">âš ï¸ íŒŒì‹± ì‹¤íŒ¨</h3>
            <p style="margin-bottom:20px;">AIê°€ ì˜ˆìƒê³¼ ë‹¤ë¥¸ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí–ˆìŠµë‹ˆë‹¤. ì•„ë˜ ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”:</p>
            <pre style="background:#f5f5f5; padding:20px; border-radius:10px; white-space:pre-wrap; max-height:500px; overflow-y:auto;">${result}</pre>
          </div>
        `;
      }

      setTimeout(() => resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    } catch (error) {
      document.getElementById('result-title').textContent = 'âŒ ì˜¤ë¥˜ ë°œìƒ';
      document.getElementById('result-subtitle').textContent = 'ì•„ë˜ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
      outputContent.textContent = error.message;
      showError(error.message);
    } finally {
      youtubeBtn.disabled = false;
      youtubeBtn.textContent = originalText;
    }
  }

  // ì´ˆê¸°í™”
  initButtonGroup('genre-btns', data.genres, 'genre');
  initButtonGroup('mood-btns', data.moods, 'mood');
  initButtonGroup('vocal-btns', data.vocals, 'vocal');
  initButtonGroup('usage-btns', data.usages, 'usage');
  initButtonGroup('instrument-btns', data.instruments, 'instrument');
  initButtonGroup('bpm-btns', data.bpms, 'bpm');
  initButtonGroup('age-group-btns', data.ageGroups, 'ageGroup');
  initButtonGroup('lang-btns', data.langs, 'lang');
  initButtonGroup('theme-btns', data.themes, 'theme');

  document.getElementById('generate-btn').addEventListener('click', handleGenerate);
  document.getElementById('youtube-btn').addEventListener('click', handleYoutubeGenerate);
  document.getElementById('reset-btn').addEventListener('click', resetAll);
  document.getElementById('copy-all').addEventListener('click', function() {
    copyToClipboard(generatedPrompt, this);
  });
  
  // í…ìŠ¤íŠ¸ ì…ë ¥ ì‹œ ì—ëŸ¬ ìˆ¨ê¸°ê¸°
  ['custom-genre', 'custom-mood', 'custom-vocal', 'custom-usage', 'custom-instrument', 
   'custom-bpm', 'custom-age', 'custom-lang', 'custom-theme'].forEach(id => {
    document.getElementById(id).addEventListener('input', hideError);
  });
</script>
</body>
</html>
