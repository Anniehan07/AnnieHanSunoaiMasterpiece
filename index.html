<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„° - ì• ë‹ˆí•œtv</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;800;900&family=Noto+Sans+KR:wght@500;700;800;900&display=swap" rel="stylesheet">
  <style>
    /* ====== (ì›ë³¸ CSS ê·¸ëŒ€ë¡œ) ====== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --gradient-start: #667eea;
      --gradient-end: #764ba2;
      --accent: #f093fb;
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --success: #00d2ff;
      --warning: #ffd32a;
      --youtube: #FF0000;
    }
    body {
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      font-weight: 500;
      background: #000000;
      min-height: 100vh;
      padding: 60px 20px;
      position: relative;
      overflow-x: hidden;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image:
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
      pointer-events: none;
      animation: float 20s ease-in-out infinite;
    }
    @keyframes float { 0%,100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
    .container { max-width: 1400px; margin: 0 auto; position: relative; z-index: 1; }
    .header { text-align: center; margin-bottom: 50px; animation: fadeInDown 0.8s ease-out; }
    @keyframes fadeInDown { from { opacity:0; transform: translateY(-30px);} to { opacity:1; transform: translateY(0);} }
    h1, h2, h3 { font-family: 'Orbitron','Noto Sans KR', sans-serif; font-weight: 900; letter-spacing: 1px; }
    h1 { font-size: 4.5em; color: #ffffff; margin-bottom: 20px; text-transform: uppercase; font-weight: 900; letter-spacing: 2px; }
    .subtitle { font-size: 1em; color: #888888; font-weight: 400; letter-spacing: 4px; text-transform: uppercase; }
    .header-controls { display:flex; justify-content:flex-end; margin-bottom: 30px; animation: fadeIn 1s ease-out 0.3s backwards; }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    #reset-btn {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    #reset-btn:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); }
    .api-key-section {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      padding: 30px;
      border-radius: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      border: 2px solid var(--accent);
      animation: fadeInUp 0.8s ease-out 0.15s backwards;
    }
    @keyframes fadeInUp { from { opacity:0; transform: translateY(30px);} to { opacity:1; transform: translateY(0);} }
    .api-key-section h3 { color: var(--gradient-start); font-size: 1.4em; margin-bottom: 15px; font-weight: 700; }
    .api-key-section p { color:#495057; margin-bottom: 15px; line-height: 1.6; }
    .api-key-section a { color: var(--gradient-start); text-decoration:none; font-weight:600; }
    .api-key-section a:hover { text-decoration: underline; }
    .api-input-group { display:flex; gap: 12px; margin-bottom: 15px; }
    .api-input-group input {
      flex: 1;
      padding: 14px 20px;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      font-size: 1em;
      font-family: 'Courier New', monospace;
    }
    .api-input-group input:focus { outline:none; border-color: var(--gradient-start); box-shadow: 0 4px 15px rgba(102,126,234,0.2); }
    .api-input-group button {
      padding: 14px 28px;
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .api-input-group button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102,126,234,0.4); }
    .api-status { font-size: 0.9em; padding: 10px 15px; border-radius: 8px; display: none; }
    .api-status.success { background:#d4edda; color:#155724; border:1px solid #c3e6cb; display:block; }
    .api-status.error { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; display:block; }
    .instruction-box {
      background:#0a0a0a;
      border:1px solid #1a1a1a;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      animation: fadeInUp 0.8s ease-out 0.2s backwards;
    }
    .instruction-box h3 { color:#ffffff; font-size: 1.8em; margin-bottom: 25px; font-weight: 800; }
    .instruction-box ol { padding-left: 30px; line-height: 2.2; }
    .instruction-box li { margin-bottom: 16px; color:#cccccc; font-size: 1.1em; font-weight: 400; }
    .step {
      background:#0a0a0a;
      border:1px solid #1a1a1a;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      transition: all 0.3s ease;
      animation: fadeInUp 0.6s ease-out backwards;
    }
    .step:hover { border-color:#2a2a2a; box-shadow: 0 8px 30px rgba(0,0,0,0.7); transform: translateY(-2px); }
    .step.required .step-title::after { content:' *'; color:#f093fb; font-weight:700; }
    .step-title {
      font-size: 1.7em;
      font-weight: 800;
      color:#ffffff;
      margin-bottom: 25px;
      display:block;
      padding-left: 25px;
      border-left: 4px solid #ffffff;
      letter-spacing: 0px;
      line-height: 1.4;
    }
    .step-subtitle { font-size: 0.85em; font-weight: 400; color:#666666; font-style: normal; margin-left: 8px; }
    .btn-group { display:flex; flex-wrap:wrap; gap: 16px; }
    button {
      padding: 16px 28px;
      border: 1px solid #2a2a2a;
      border-radius: 12px;
      background: #0a0a0a;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
      font-size: 1.05em;
      font-weight: 600;
      color:#ffffff;
      position: relative;
      overflow:hidden;
      min-height: 52px;
    }
    button:hover:not(:disabled) { background:#1a1a1a; border-color:#3a3a3a; transform: translateY(-1px); }
    button.active { background:#ffffff; color:#000000; border-color:#ffffff; font-weight: 700; }
    button:disabled { opacity:0.5; cursor:not-allowed; }
    input[type="text"], textarea {
      width: 100%;
      margin-top: 20px;
      border-radius: 12px;
      border: 1px solid #2a2a2a;
      padding: 20px 24px;
      font-size: 1.1em;
      background: #0a0a0a;
      color:#ffffff;
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      font-weight: 500;
      transition: all 0.3s ease;
      line-height: 1.8;
    }
    input[type="text"]:focus, textarea:focus { outline:none; border-color:#3a3a3a; background:#0f0f0f; }
    input[type="text"]::placeholder, textarea::placeholder { color:#666666; font-size: 1em; }
    textarea { min-height: 180px; resize: vertical; }
    .main-btn {
      width:100%;
      padding: 28px;
      background:#ffffff;
      color:#000000;
      border:none;
      border-radius: 12px;
      font-size: 1.4em;
      font-weight: 800;
      margin-top: 40px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
      box-shadow: 0 4px 20px rgba(255,255,255,0.1);
      position: relative;
      overflow:hidden;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    .main-btn::before {
      content:'';
      position:absolute;
      top:0; left:-100%;
      width:100%; height:100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    .main-btn:hover:not(:disabled)::before { left:100%; }
    .main-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(255,255,255,0.2); background:#f5f5f5; }
    .main-btn:disabled { background:#adb5bd; cursor:not-allowed; transform:none; }
    .main-btn.youtube-btn {
      background: linear-gradient(135deg, #FF0000 0%, #cc0000 100%);
      margin-top: 15px;
      box-shadow: 0 10px 30px rgba(255,0,0,0.3);
    }
    .main-btn.youtube-btn:hover:not(:disabled) { box-shadow: 0 15px 40px rgba(255,0,0,0.4); }
    .error-message {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color:white;
      padding: 20px 25px;
      border-radius: 15px;
      margin-top: 20px;
      display:none;
      box-shadow: 0 5px 20px rgba(255,107,107,0.3);
      animation: shake 0.5s;
    }
    @keyframes shake { 0%,100%{transform:translateX(0);} 25%{transform:translateX(-10px);} 75%{transform:translateX(10px);} }
    .error-message.show { display:block; }
    #result { margin-top: 50px; animation: fadeInUp 0.6s ease-out; display:none; }
    .result-header {
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
      color:white;
      padding: 30px;
      border-radius: 20px 20px 0 0;
      text-align:center;
    }
    .result-header h2 { font-size: 2em; margin-bottom: 10px; }
    .copy-section { display:flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; padding: 20px; background:white; }
    .copy-btn {
      background: linear-gradient(135deg, #4b6584 0%, #3d5266 100%);
      color:white;
      border:none;
      padding: 14px 24px;
      border-radius: 50px;
      font-size: 1em;
      cursor:pointer;
      flex:1;
      min-width:150px;
      font-weight:600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(75,101,132,0.3);
    }
    .copy-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(75,101,132,0.4); }
    .copy-btn.copied { background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%); animation: pulse 0.5s; }
    @keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.05);} }
    .output-box {
      white-space: pre-wrap;
      background:white;
      padding: 30px;
      border-radius: 0 0 20px 20px;
      line-height: 2;
      font-size: 1.05em;
      color:#333;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      max-height: 600px;
      overflow-y:auto;
    }
    .loading { text-align:center; padding: 50px; font-size: 1.2em; color:#666; }
    .loading::after { content:'...'; animation: dots 1.5s infinite; }
    @keyframes dots { 0%,20%{content:'.';} 40%{content:'..';} 60%,100%{content:'...';} }
    @media (max-width: 768px) {
      h1 { font-size: 2.5em; }
      .step { padding: 25px; }
      .main-btn { font-size: 1.2em; padding: 20px; }
    }
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }
    ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%); border-radius: 5px; }
    ::-webkit-scrollbar-thumb:hover { background: linear-gradient(135deg, var(--gradient-end) 0%, var(--gradient-start) 100%); }
  </style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>ğŸµ Suno AI í”„ë¡¬í”„íŠ¸ ë§ˆìŠ¤í„°</h1>
    <p class="subtitle">âœ¨ ì• ë‹ˆí•œ&ì–´ë¹„ Suno ai ìµìŠ¤í´ë£¨ì‹œë¸Œ âœ¨</p>
  </div>

  <div class="header-controls">
    <button id="reset-btn">ğŸ”„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì„ íƒí•˜ê¸°</button>
  </div>

  <div class="api-key-section">
    <h3>ğŸ”‘ Google AI Studio API í‚¤ ì„¤ì •</h3>
    <p>Google AI Studioì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”. <a href="https://aistudio.google.com/app/apikey" target="_blank">API í‚¤ ë°œê¸‰ë°›ê¸° â†’</a></p>
    <div class="api-input-group">
      <input type="password" id="api-key-input" placeholder="AIzaSy... í˜•ì‹ì˜ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      <button id="save-api-key-btn">ğŸ’¾ ì €ì¥</button>
    </div>
    <p class="api-status" id="api-status"></p>
  </div>

  <div class="instruction-box">
    <h3>ğŸ“Œ ì‚¬ìš© ì•ˆë‚´</h3>
    <ol>
      <li>ğŸ”‘ ìœ„ì— Google AI Studio API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ì„¸ìš”</li>
      <li>ğŸ¨ ì•„ë˜ ì˜µì…˜ë“¤ì„ ì„ íƒí•˜ì—¬ ì›í•˜ëŠ” ìŒì•… ìŠ¤íƒ€ì¼ì„ ì„¤ì •í•˜ì„¸ìš”</li>
      <li>ğŸµ <strong>"í”„ë¡¬í”„íŠ¸ & ê°€ì‚¬ ìƒì„±í•˜ê¸°"</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ 1ê³¡ì„ ì™„ì„±í•©ë‹ˆë‹¤</li>
      <li>ğŸŒ <strong>"ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„±"</strong> ë²„íŠ¼ìœ¼ë¡œ 10ê³¡ + 6ê°œêµ­ì–´ ì—…ë¡œë“œ ì„¸íŠ¸ë¥¼ í•œë²ˆì— ìƒì„±í•˜ì„¸ìš”</li>
    </ol>
  </div>

  <div class="step required">
    <span class="step-title">ğŸ¸ 1. ì¥ë¥´ ì„ íƒ <span class="step-subtitle">(ìŒì•…ì˜ ìƒ‰ê¹”)</span></span>
    <div class="btn-group" id="genre-btns"></div>
  </div>

  <div class="step required">
    <span class="step-title">âœ¨ 2. ë¶„ìœ„ê¸° ë° ê°ì„± ì„ íƒ <span class="step-subtitle">(ê°ì •ì˜ ê¹Šì´)</span></span>
    <div class="btn-group" id="mood-btns"></div>
  </div>

  <div class="step required">
    <span class="step-title">ğŸ¤ 3. ë³´ì»¬ ë° ì°½ë²• ì„ íƒ <span class="step-subtitle">(ëª©ì†Œë¦¬ì˜ ì§ˆê°)</span></span>
    <div class="btn-group" id="vocal-btns"></div>
  </div>

  <div class="step">
    <span class="step-title">ğŸ¬ 4. ì‚¬ìš© ìš©ë„ ë° ìƒí™© <span class="step-subtitle">(ê³µê°„ì˜ ìš¸ë¦¼)</span></span>
    <div class="btn-group" id="usage-btns"></div>
    <input type="text" id="custom-usage" placeholder="ì˜ˆ: ìœ íŠœë¸Œ ë¸Œì´ë¡œê·¸, ìš”ë¦¬ ë°°ê²½ìŒ ë“±">
  </div>

  <div class="step">
    <span class="step-title">ğŸ¹ 5. ì£¼ìš” ì•…ê¸° ì„¤ì • <span class="step-subtitle">(ì†Œë¦¬ì˜ ë„êµ¬)</span></span>
    <div class="btn-group" id="instrument-btns"></div>
    <input type="text" id="custom-instrument" placeholder="ì˜ˆ: ì‹±ì‰ë³¼, ì²¼ë¡œ, í•´ê¸ˆ ë“±">
  </div>

  <div class="step">
    <span class="step-title">âš¡ 6. ì†ë„ (BPM) ì„¤ì • <span class="step-subtitle">(ë¦¬ë“¬ì˜ ë§¥ë°•)</span></span>
    <div class="btn-group" id="bpm-btns"></div>
  </div>

  <div class="step required">
    <span class="step-title">ğŸ‘¥ 7. íƒ€ê²Ÿ ì—°ë ¹ëŒ€ ì„ íƒ <span class="step-subtitle">(ì²­ì¤‘ì˜ ê³µê°)</span></span>
    <div class="btn-group" id="age-group-btns"></div>
  </div>

  <div class="step required">
    <span class="step-title">ğŸŒ 8. ê°€ì‚¬ ì–¸ì–´ ì„¤ì • <span class="step-subtitle">(ê¸€ë¡œë²Œ ì†Œí†µ)</span></span>
    <div class="btn-group" id="lang-btns"></div>
  </div>

  <div class="step required">
    <span class="step-title">ğŸ“ 9. ê°€ì‚¬ ì£¼ì œ ë° ìš”ì²­ <span class="step-subtitle">(ì°½ì‘ì˜ í•µì‹¬)</span></span>
    <div class="btn-group" id="theme-btns"></div>
    <textarea id="custom-theme" placeholder="ê°€ì‚¬ ì£¼ì œë¥¼ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”. (í•„ìˆ˜)"></textarea>
  </div>

  <div class="error-message" id="error-message"></div>

  <button class="main-btn" id="generate-btn">ğŸµ í”„ë¡¬í”„íŠ¸ & ê°€ì‚¬ ìƒì„±í•˜ê¸° (AI ìë™ ìƒì„±)</button>
  <button class="main-btn youtube-btn" id="youtube-btn">ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„±í•˜ê¸° (10ê³¡ + 6ê°œêµ­ì–´)</button>

  <div id="result">
    <div class="result-header">
      <h2 id="result-title">ğŸ¼ AI ìƒì„± ê²°ê³¼</h2>
      <p id="result-subtitle">Suno AIì— ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!</p>
    </div>
    <div class="copy-section">
      <button class="copy-btn" id="copy-all">ğŸ“‹ ì „ì²´ ë³µì‚¬</button>
    </div>
    <div class="output-box" id="output-content"></div>
  </div>
</div>

<script>
  const data = {
    genres: [
      "ğŸ¹ ì‹œí‹°íŒ(City Pop)", "ğŸ§ ë¡œíŒŒì´(Lo-fi)", "ğŸŒŠ ì¹ ì›¨ì´ë¸Œ", "ğŸ¸ K-ë¡", "ğŸ‘¥ í•©ì°½/ì¤‘ì°½",
      "ğŸ§˜ ëª…ìƒ/ì¹˜ìœ ", "âœï¸ CCM/ì°¬ì–‘", "ğŸ’« K-pop", "ğŸ’” ë°œë¼ë“œ", "ğŸº ì¬ì¦ˆ", "ğŸ¤ íŒ", "ğŸµ í™í•©",
      "ğŸŒŒ ë‰´ì—ì´ì§€", "ğŸŒ«ï¸ ì•°ë¹„ì–¸íŠ¸", "ğŸ¶ íŠ¸ë¡œíŠ¸", "ğŸ· ë¸”ë£¨ìŠ¤", "ğŸ¤  ì»¨íŠ¸ë¦¬", "ğŸª• í¬í¬", "ğŸï¸ ë ˆê²Œ",
      "âœ¨ ë””ìŠ¤ì½”", "ğŸ¸ ë¡", "ğŸ”Š ì „ììŒì•…", "ğŸ¼ R&B", "ğŸ¹ ì†Œìš¸", "ğŸ›ï¸ ì‹ ìŠ¤íŒ", "â˜ï¸ ë“œë¦¼ íŒ",
      "ğŸ¨ ì¸ë””íŒ", "ğŸ™ ê°€ìŠ¤í ", "ğŸº ìŠ¤ìœ™", "ğŸ’ƒ ë¼í‹´", "ğŸµ ì´ì§€ë¦¬ìŠ¤ë‹", "ğŸ‘¶ ìì¥ê°€", "ğŸ§¸ ë™ìš”", "ğŸ„ ìºë¡¤"
    ],
    moods: [
      "ğŸŒ™ ì”ì”í•œ (ê³ ìš”í•œ)", "ğŸ˜¢ ê¹Šì€ ìŠ¬í””", "ğŸŒƒ ìš°ìš¸í•œ ìƒˆë²½", "ğŸ™ ê²½ê±´í•˜ê³  ì€í˜œë¡œìš´",
      "ğŸ¤— ë”°ìŠ¤í•œ ìœ„ë¡œ", "â˜®ï¸ ìˆœìˆ˜í•œ í‰í™”", "â˜ï¸ í¬ê·¼í•œ êµ¬ë¦„", "âš¡ ì—ë„ˆì§€ í­ë°œ",
      "ğŸ’• ë¡œë§¨í‹± ê°ì„±", "ğŸŒ… ì¼ëª°ê°™ì€", "ğŸŒŒ ìš°ì£¼ ê°™ì€", "ğŸ–¤ ë‹¤í¬í•˜ê³  ê°•ë ¬",
      "ğŸƒ ì‹œì›í•œ ë°”ëŒ", "ğŸš— ê°•ë ¥í•œ ë“œë¼ì´ë¸Œ", "ğŸ’ª ë„ì „ì ì¸", "ğŸ”ï¸ ì›…ì¥í•œ ëŒ€ì„œì‚¬ì‹œ", "ğŸ¥° ê·€ì—¬ìš´"
    ],
    vocals: [
      "ğŸ‘¶ ì–´ë¦°ì´ í•©ì°½ë‹¨ (Children's Choir)",
      "ğŸ‘¥ ì–´ë¥¸ í•©ì°½ë‹¨ (Adult Choir)",
      "ğŸ‘© ë§‘ê³  ê¹¨ë—í•œ ì—¬ì„± ë³´ì»¬ (Female - Clear)",
      "âœ¨ ì—í…Œë¦¬ì–¼ ì—¬ì„± ë³´ì»¬ (Female - Ethereal)",
      "ğŸ’• ë¡œë§¨í‹± ì—¬ì„± ë³´ì»¬ (Female - Romantic)",
      "ğŸ™ï¸ í—ˆìŠ¤í‚¤ ë‚¨ì„± ë³´ì»¬ (Male - Husky)",
      "ğŸ‘¦ ì†Œë…„ ë³´ì»¬ (Boy Vocal)",
      "ğŸ‘§ ë§‘ì€ ì†Œë…€ ë³´ì»¬ (Girl Vocal)",
      "ğŸ”¥ ì—´ì •ì ì¸ ë‚¨ì„± ë³´ì»¬ (Male - Passionate)",
      "ğŸµ ë‚¨ë…€ ì½”ëŸ¬ìŠ¤ í•©ì°½ (Mixed Chorus)",
      "ğŸ¤– ë³´ì½”ë” íš¨ê³¼ (Vocoder)",
      "ğŸ¤« ì†ì‚­ì´ëŠ” ì—¬ì„± (Female - Whisper)",
      "ğŸ¤ ë© (ë‚¨ì„± Rap)",
      "ğŸ¤ ë© (ì—¬ì„± Rap)",
      "ğŸ­ ì˜¤í˜ë¼í‹± (ë‚¨ì„± Opera)",
      "ğŸ­ ì˜¤í˜ë¼í‹± (ì—¬ì„± Opera)",
      "ğŸŒ¬ï¸ ê³µê¸°ë°˜ ì‚¬ìš´ë“œë°˜ (Breathy)",
      "ğŸ¼ ê°€ì‚¬ì—†ëŠ” ì—°ì£¼ê³¡ (Instrumental)"
    ],
    usages: [
      "ğŸ“¹ ìœ íŠœë¸Œ ë¸Œì´ë¡œê·¸ BGM", "ğŸ® ê²Œì„ ë°©ì†¡ ë°°ê²½ìŒ", "ğŸ“š ê³µë¶€/ì§‘ì¤‘ë ¥ í–¥ìƒ",
      "ğŸ’ª ìš´ë™/í”¼íŠ¸ë‹ˆìŠ¤", "ğŸ˜´ ìˆ™ë©´/ëª…ìƒ", "â˜• ì¹´í˜ ë¶„ìœ„ê¸°", "ğŸ“± ê°ì„± ì‡¼ì¸ /í‹±í†¡",
      "â›ª êµíšŒ ì˜ˆë°°/ë¬µìƒ"
    ],
    instruments: [
      "ğŸ¹ ê·¸ëœë“œ í”¼ì•„ë…¸", "ğŸ¸ ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€", "âš¡ ì¼ë ‰ ê¸°íƒ€", "ğŸµ ì˜¤ë¥´ê³¨", "ğŸ· ìƒ‰ì†Œí°",
      "ğŸ» ë°”ì´ì˜¬ë¦°", "ğŸ» ì²¼ë¡œ", "ğŸ”” ì‹±ì‰ë³¼", "ğŸ›ï¸ ì‹ ë””ì‚¬ì´ì €"
    ],
    bpms: [
      "ğŸ˜´ ì´ˆì €ì† (40-50 BPM) - ê¹Šì€ ìˆ˜ë©´/ëª…ìƒ",
      "ğŸŒ™ ë§¤ìš° ëŠë¦¼ (50-70 BPM) - ìì¥ê°€/íœ´ì‹",
      "ğŸ§˜ ëŠë¦¼ (70-90 BPM) - í‰ì˜¨í•œ í˜¸í¡",
      "ğŸš¶ ë³´í†µ (90-110 BPM) - í¸ì•ˆí•œ ê±·ê¸°",
      "ğŸ˜Š ì•½ê°„ ë¹ ë¦„ (110-130 BPM) - ê²½ì¾Œí•œ ë¶„ìœ„ê¸°",
      "ğŸƒ ë¹ ë¦„ (130-150 BPM) - ì—ë„ˆì§€ ë„˜ì¹˜ëŠ”",
      "ğŸ’ª ë§¤ìš° ë¹ ë¦„ (150-170 BPM) - ìš´ë™/ëŒ„ìŠ¤",
      "âš¡ ì´ˆê³ ì† (170+ BPM) - ê²©ë ¬í•œ í™œë™"
    ],
    langs: ["ğŸ‡°ğŸ‡· í•œêµ­ì–´(Korean)", "ğŸ‡ºğŸ‡¸ ì˜ì–´(English)", "ğŸŒ í•œêµ­ì–´+ì˜ì–´ ì„ì–´ì„œ"],
    ageGroups: [
      "ğŸ‘¶ ìœ ì•„ (0-7ì„¸) - ë™ìš”/ìì¥ê°€ ëŠë‚Œ",
      "ğŸ’ 10ëŒ€ (ì²­ì†Œë…„) - ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ê°ì„±",
      "ğŸ’¼ 20ëŒ€ (ì²­ì¶˜) - íŠ¸ë Œë””í•˜ê³  ì„¸ë ¨ëœ",
      "ğŸ‘” 30-40ëŒ€ (ì§ì¥ì¸/ë¶€ëª¨) - ê³µê°ë˜ëŠ” ì¼ìƒ",
      "ğŸ© 50-60ëŒ€ (ì‹œë‹ˆì–´) - ê¹Šì´ìˆê³  ì„±ìˆ™í•œ",
      "ğŸŒ ì „ ì—°ë ¹ëŒ€ (All Ages) - ë³´í¸ì  ê°ì„±"
    ],
    themes: [
      "ğŸ’• ì²«ì‚¬ë‘", "ğŸ‘¶ ìì¥ê°€", "ğŸŒ… ìƒˆë²½ ë¬µìƒ", "ğŸ’” ì´ë³„ì˜ ì•„í””", "ğŸ¤ ì¬íšŒ", "ğŸ˜Š ì§ì‚¬ë‘",
      "ğŸ’ª ìê¸° ì‚¬ë‘", "ğŸ”¥ ìš©ê¸°(Antifragile)", "âœ¨ ê°“ìƒ", "ğŸ‘¤ ì£¼ì²´ì  ë‚˜", "ğŸ¯ ì‹¤íŒ¨ì™€ ê·¹ë³µ",
      "ğŸ’ ìì‹ ê° íšŒë³µ", "ğŸ  í–¥ìˆ˜(Nostalgia)", "ğŸŒ§ï¸ ë¹„ ì˜¤ëŠ” ë‚ ", "âœˆï¸ ì—¬í–‰", "ğŸ™ ê°ì‚¬ì™€ ê¸°ë„",
      "ğŸ¼ ê°€ì‚¬ì—†ëŠ”(ì—°ì£¼ê³¡)", "ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤"
    ]
  };

  const selections = {
    genre: null, mood: null, vocal: null, usage: null, instrument: null,
    bpm: null, ageGroup: null, lang: null, theme: null
  };

  let generatedPrompt = "";
  let apiKey = localStorage.getItem('gemini_api_key') || '';

  // âœ… (ì¤‘ìš”) ìˆ˜ê°•ìƒ í‚¤ë§ˆë‹¤ ì§€ì› ëª¨ë¸ì´ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ì„œ "ê°€ëŠ¥í•œ ëª¨ë¸ ìë™íƒìƒ‰" ì˜µì…˜
  const PREFERRED_MODELS = [
    "gemini-1.5-flash",
    "gemini-1.5-pro",
    "gemini-2.0-flash",
    "gemini-2.0-pro"
  ];

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ API í‚¤ í‘œì‹œ
  if (apiKey) {
    document.getElementById('api-key-input').value = apiKey;
    const statusDiv = document.getElementById('api-status');
    statusDiv.className = 'api-status success';
    statusDiv.textContent = 'âœ… ì €ì¥ëœ API í‚¤ê°€ ìˆìŠµë‹ˆë‹¤.';
  }

  function showStatus(type, html) {
    const statusDiv = document.getElementById('api-status');
    statusDiv.className = 'api-status ' + type;
    statusDiv.style.display = 'block';
    statusDiv.innerHTML = html;
  }

  // âœ… ëª¨ë¸ ëª©ë¡ ì¡°íšŒ (v1beta)
  async function listModels(key) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models?key=${encodeURIComponent(key)}`;
    const res = await fetch(url, { method: 'GET' });
    const text = await res.text();
    if (!res.ok) {
      // ê·¸ëŒ€ë¡œ ë˜ì§€ë©´ ì•„ë˜ì—ì„œ ì¹œì ˆ ë©”ì‹œì§€ë¡œ ë°”ê¿”ì¤Œ
      throw new Error(text || `ListModels ì‹¤íŒ¨ (${res.status})`);
    }
    const data = JSON.parse(text);
    const models = (data.models || []).map(m => m.name?.replace("models/", "")).filter(Boolean);
    return models;
  }

  function pickBestModel(available) {
    for (const m of PREFERRED_MODELS) {
      if (available.includes(m)) return m;
    }
    // ì—†ìœ¼ë©´ geminië¡œ ì‹œì‘í•˜ëŠ” ê²ƒ ì¤‘ ì²« ë²ˆì§¸ë¼ë„
    const fallback = available.find(x => x.startsWith("gemini-"));
    return fallback || null;
  }

  // âœ… API í‚¤ ì €ì¥ ë²„íŠ¼ (í…ŒìŠ¤íŠ¸ ë¡œì§ ê°œì„ )
  document.getElementById('save-api-key-btn').addEventListener('click', async function () {
    const keyInput = document.getElementById('api-key-input');
    const key = keyInput.value.trim();

    if (!key) return showStatus('error', 'âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    if (!key.startsWith('AIzaSy')) return showStatus('error', 'âŒ ì˜¬ë°”ë¥¸ API í‚¤ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. (AIzaSyë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤)');
    if (key.length < 30) return showStatus('error', 'âŒ API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ì „ì²´ í‚¤ë¥¼ ë³µì‚¬í–ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.');

    showStatus('', 'ğŸ”„ API í‚¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¤‘... (ëª¨ë¸ ëª©ë¡ í™•ì¸ â†’ ì‹¤ì œ í˜¸ì¶œ í…ŒìŠ¤íŠ¸)');

    try {
      // 1) ëª¨ë¸ ëª©ë¡ë¶€í„° í™•ì¸ (ì—¬ê¸°ì„œ API Enable ì•ˆ ë˜ì–´ìˆìœ¼ë©´ ë°”ë¡œ ê±¸ë¦¼)
      const availableModels = await listModels(key);
      const chosenModel = pickBestModel(availableModels);

      if (!chosenModel) {
        return showStatus('error', `âŒ ì‚¬ìš© ê°€ëŠ¥í•œ Gemini ëª¨ë¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br/><br/>
        ê°€ëŠ¥í•œ ëª¨ë¸ ëª©ë¡ì´ ë¹„ì–´ìˆì–´ìš”. (í”„ë¡œì íŠ¸/ê¶Œí•œ/ì§€ì—­ ì´ìŠˆ ê°€ëŠ¥)<br/>
        <strong>í•´ê²°:</strong> AI Studioì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¡œ API í‚¤ë¥¼ ë‹¤ì‹œ ë°œê¸‰í•´ë³´ì„¸ìš”.`);
      }

      // 2) ì‹¤ì œ generateContent í…ŒìŠ¤íŠ¸ (v1beta + ì„ íƒëœ ëª¨ë¸)
      const testUrl = `https://generativelanguage.googleapis.com/v1beta/models/${encodeURIComponent(chosenModel)}:generateContent?key=${encodeURIComponent(key)}`;

      const testResponse = await fetch(testUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: "Hello" }] }]
        })
      });

      const responseText = await testResponse.text();

      if (testResponse.ok) {
        apiKey = key;
        localStorage.setItem('gemini_api_key', key);
        localStorage.setItem('gemini_model', chosenModel);

        showStatus('success', `âœ… API í‚¤ í…ŒìŠ¤íŠ¸ ì„±ê³µ! ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.<br/>
        âœ… ì„ íƒëœ ëª¨ë¸: <strong>${chosenModel}</strong><br/>
        ì´ì œ ê°€ì‚¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
      } else {
        // ì‹¤íŒ¨ ì›ì¸ë³„ ì•ˆë‚´
        if (testResponse.status === 403) {
          showStatus('error', `âŒ ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ (403)<br/><br/>
          <strong>ì›ì¸:</strong> API ì‚¬ìš© ê¶Œí•œ/ì¿¼í„°/í‚¤ ì œí•œ/í”„ë¡œì íŠ¸ ì„¤ì • ë¬¸ì œ<br/>
          <strong>í•´ê²°:</strong><br/>
          1) AI Studioì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¡œ í‚¤ ì¬ë°œê¸‰<br/>
          2) í‚¤ ì œí•œì´ ê±¸ë ¤ìˆë‹¤ë©´ ì œí•œ í•´ì œ<br/><br/>
          ìƒì„¸ ì˜¤ë¥˜: <pre style="white-space:pre-wrap; margin-top:10px;">${escapeHtml(responseText).slice(0, 1000)}</pre>`);
        } else if (testResponse.status === 404) {
          showStatus('error', `âŒ APIë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (404)<br/><br/>
          <strong>ì›ì¸:</strong> ëª¨ë¸/ë²„ì „ ë¶ˆì¼ì¹˜ ë˜ëŠ” API ë¯¸í™œì„±í™”<br/>
          <strong>í•´ê²°:</strong><br/>
          1) ì•„ë˜ ë§í¬ì—ì„œ API í™œì„±í™”(Enable) í™•ì¸<br/>
          ğŸ‘‰ <a href="https://console.cloud.google.com/apis/library/generativelanguage.googleapis.com" target="_blank" style="color:#667eea; font-weight:bold;">API í™œì„±í™” í˜ì´ì§€ â†’</a><br/>
          2) 1~2ë¶„ ëŒ€ê¸° í›„ ë‹¤ì‹œ ì‹œë„<br/><br/>
          ìƒì„¸ ì˜¤ë¥˜: <pre style="white-space:pre-wrap; margin-top:10px;">${escapeHtml(responseText).slice(0, 1000)}</pre>`);
        } else {
          showStatus('error', `âŒ API í‚¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ (${testResponse.status})<br/><br/>
          <pre style="white-space:pre-wrap;">${escapeHtml(responseText).slice(0, 1200)}</pre>`);
        }
      }
    } catch (err) {
      const msg = (err && err.message) ? err.message : String(err);
      // ListModels ë‹¨ê³„ì—ì„œ í„°ì§€ë©´ ê±°ì˜ "API Enable"ì´ë‚˜ "í‚¤/í”„ë¡œì íŠ¸ ë¬¸ì œ"
      showStatus('error', `âŒ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ<br/><br/>
      <strong>ê°€ì¥ í”í•œ ì›ì¸:</strong> Generative Language API ë¯¸í™œì„±í™” / í”„ë¡œì íŠ¸ ì„¤ì • ë¬¸ì œ<br/>
      ğŸ‘‰ <a href="https://console.cloud.google.com/apis/library/generativelanguage.googleapis.com" target="_blank" style="color:#667eea; font-weight:bold;">API í™œì„±í™” í˜ì´ì§€ â†’</a><br/><br/>
      ì˜¤ë¥˜ ë‚´ìš©:<br/>
      <pre style="white-space:pre-wrap; margin-top:10px;">${escapeHtml(msg).slice(0, 1200)}</pre>`);
    }

    // ì„±ê³µì´ë©´ 10ì´ˆ í›„ ìˆ¨ê¹€
    setTimeout(() => {
      const statusDiv = document.getElementById('api-status');
      if (statusDiv.className.includes('success')) statusDiv.style.display = 'none';
    }, 10000);
  });

  function escapeHtml(s) {
    return String(s)
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;");
  }

  /**
   * âœ… Gemini API í˜¸ì¶œ í•¨ìˆ˜ (v1beta + ëª¨ë¸ ìë™ ì„ íƒ)
   */
  async function callGeminiAPI(promptText) {
    if (!apiKey) {
      throw new Error('ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! ìœ„ì˜ ğŸ”‘ API í‚¤ ì„¤ì • ì„¹ì…˜ì—ì„œ ì €ì¥í•´ì£¼ì„¸ìš”.');
    }

    // ì €ì¥ëœ ëª¨ë¸ì´ ìˆìœ¼ë©´ ìš°ì„  ì‚¬ìš©, ì—†ìœ¼ë©´ listModelsë¡œ ìë™ ì„ íƒ
    let model = localStorage.getItem('gemini_model') || '';

    if (!model) {
      const available = await listModels(apiKey);
      model = pickBestModel(available);
      if (!model) throw new Error('ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. AI Studioì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¡œ í‚¤ë¥¼ ë‹¤ì‹œ ë°œê¸‰í•´ë³´ì„¸ìš”.');
      localStorage.setItem('gemini_model', model);
    }

    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${encodeURIComponent(model)}:generateContent?key=${encodeURIComponent(apiKey)}`;

    const requestBody = {
      contents: [{ parts: [{ text: promptText }] }],
      generationConfig: {
        temperature: 0.9,
        topK: 40,
        topP: 0.95,
        maxOutputTokens: 8192
      }
    };

    const response = await fetch(apiUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(requestBody)
    });

    const text = await response.text();

    if (!response.ok) {
      // ì‚¬ìš©ìì—ê²Œ ì¹œì ˆíˆ ì•ˆë‚´
      throw new Error(`âŒ API í˜¸ì¶œ ì‹¤íŒ¨ (${response.status})\n\n${text.slice(0, 1500)}\n\nâœ… í•´ê²° íŒ:\n- AI Studioì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¡œ API í‚¤ ì¬ë°œê¸‰\n- API í™œì„±í™”(Enable) í™•ì¸\n- í‚¤ ì œí•œ(Restriction) ê±¸ë ¤ìˆìœ¼ë©´ í•´ì œ`);
    }

    const data = JSON.parse(text);

    if (!data.candidates || !data.candidates[0]?.content?.parts?.[0]?.text) {
      throw new Error(`âŒ AI ì‘ë‹µ í˜•ì‹ ì˜¤ë¥˜\n\në°›ì€ ì‘ë‹µ:\n${JSON.stringify(data, null, 2).slice(0, 1500)}`);
    }

    return data.candidates[0].content.parts[0].text;
  }

  function initButtonGroup(containerId, itemList, selectionKey) {
    const container = document.getElementById(containerId);
    itemList.forEach(item => {
      const button = document.createElement('button');
      button.innerText = item;
      if (item === selections[selectionKey]) button.classList.add('active');
      button.onclick = () => {
        Array.from(container.children).forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        selections[selectionKey] = item;
        hideError();
      };
      container.appendChild(button);
    });
  }

  function validateSelections() {
    const errors = [];
    if (!selections.genre) errors.push('ğŸ¸ ì¥ë¥´');
    if (!selections.mood) errors.push('âœ¨ ë¶„ìœ„ê¸°');
    if (!selections.vocal) errors.push('ğŸ¤ ë³´ì»¬');
    if (!selections.ageGroup) errors.push('ğŸ‘¥ íƒ€ê²Ÿ ì—°ë ¹ëŒ€');
    if (!selections.lang) errors.push('ğŸŒ ì–¸ì–´');
    const themeInput = document.getElementById('custom-theme').value.trim();
    if (!themeInput && !selections.theme) errors.push('ğŸ“ ê°€ì‚¬ ì£¼ì œ');
    return errors;
  }

  function showError(message) {
    const errorDiv = document.getElementById('error-message');
    errorDiv.textContent = message;
    errorDiv.classList.add('show');
    errorDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }

  function hideError() {
    document.getElementById('error-message').classList.remove('show');
  }

  async function copyToClipboard(text, buttonId, successMessage) {
    if (!text || text.trim() === '') {
      alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }
    try {
      await navigator.clipboard.writeText(text);
      const button = document.getElementById(buttonId);
      const originalText = button.textContent;
      button.classList.add('copied');
      button.textContent = 'âœ“ ' + successMessage;
      setTimeout(() => {
        button.classList.remove('copied');
        button.textContent = originalText;
      }, 2000);
    } catch (err) {
      alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
      console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
    }
  }

  function resetAll() {
    if (!confirm('ëª¨ë“  ì„ íƒì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    selections.genre = null;
    selections.mood = null;
    selections.vocal = null;
    selections.usage = null;
    selections.instrument = null;
    selections.bpm = null;
    selections.ageGroup = null;
    selections.lang = null;
    selections.theme = null;

    document.querySelectorAll('.btn-group button').forEach(btn => btn.classList.remove('active'));
    document.getElementById('custom-usage').value = '';
    document.getElementById('custom-instrument').value = '';
    document.getElementById('custom-theme').value = '';
    document.getElementById('result').style.display = 'none';

    hideError();
    generatedPrompt = '';
    window.scrollTo({ top: 0, behavior: 'smooth' });

    setTimeout(() => alert('âœ… ëª¨ë“  ì„ íƒì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.'), 300);
  }

  function generatePromptText() {
    const theme = document.getElementById('custom-theme').value.trim() || selections.theme;
    const usage = document.getElementById('custom-usage').value.trim() || selections.usage || "ì¼ë°˜ ê°ìƒ";
    const instrument = document.getElementById('custom-instrument').value.trim() || selections.instrument || "ììœ ë¡­ê²Œ";
    const bpm = selections.bpm || "ììœ ë¡­ê²Œ";

    return `[ëª…ë ¹ì–´] 
Suno AIë¥¼ ìœ„í•œ ë…¸ë˜ ì œëª©, Style Tag, í’€ë²„ì „ ê°€ì‚¬ë¥¼ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

ì œëª©: [ì—¬ê¸°ì— ì œëª©]
ìŠ¤íƒ€ì¼: [ì—¬ê¸°ì— ì˜ë¬¸ íƒœê·¸]
ê°€ì‚¬: [ì—¬ê¸°ì— ê°€ì‚¬ ì „ì²´]

[ì¡°ê±´]
- íƒ€ê²Ÿ ì—°ë ¹ëŒ€: ${selections.ageGroup} â­ ë§¤ìš° ì¤‘ìš”! 
- ìš©ë„: ${usage}
- ì¥ë¥´: ${selections.genre}
- ë¶„ìœ„ê¸°: ${selections.mood}
- ë³´ì»¬: ${selections.vocal}
- ì£¼ìš” ì•…ê¸°: ${instrument}
- ì†ë„(BPM): ${bpm}
- ê°€ì‚¬ ì–¸ì–´: ${selections.lang}
- ì£¼ì œ: ${theme}

[íƒ€ê²Ÿ ì—°ë ¹ëŒ€ë³„ ì°½ì‘ ê°€ì´ë“œ - í•„ìˆ˜ ì¤€ìˆ˜!]

**ğŸ‘¶ ìœ ì•„ (0-7ì„¸):**
- ì œëª©: ë‹¨ìˆœí•˜ê³  ê·€ì—¬ìš´ ë‹¨ì–´ ì‚¬ìš© (ì˜ˆ: "ë°˜ì§ë°˜ì§ ì‘ì€ ë³„", "ê¿ˆë‚˜ë¼ ì—¬í–‰")
- ì–´íˆ¬: ë°˜ë³µì ì´ê³  ì‰¬ìš´ ë‹¨ì–´, ì˜ì„±ì–´/ì˜íƒœì–´ í™œìš©
- ê°€ì‚¬: ì§§ì€ ë¬¸ì¥, ì‰¬ìš´ ë¦¬ë“¬, êµìœ¡ì  ë‚´ìš©
- ì˜ˆì‹œ: "ì—„ë§ˆ, ì•„ë¹ ", "ë›°ë›°ë¹µë¹µ", "ë°˜ì§ë°˜ì§"

**ğŸ’ 10ëŒ€ (ì²­ì†Œë…„):**
- ì œëª©: íŠ¸ë Œë””í•˜ê³  ê°ì„±ì  (ì˜ˆ: "ìš°ë¦¬ë“¤ì˜ ì²­ì¶˜", "ë„ˆì˜ ì´ë¦„ì„ ë¶ˆëŸ¬ë´")
- ì–´íˆ¬: ì¹œêµ¬ê°™ì€ ë§íˆ¬, ê³µê° ê°€ëŠ” í•™êµìƒí™œ/ê³ ë¯¼
- ê°€ì‚¬: ê¿ˆ, ë„ì „, ìš°ì •, ì²«ì‚¬ë‘, ì„±ì¥í†µ
- ì˜ˆì‹œ: "ì§„ì§œ ë‚´ ëª¨ìŠµ", "í•¨ê»˜ë¼ë©´ ê´œì°®ì•„"

**ğŸ’¼ 20ëŒ€ (ì²­ì¶˜):**
- ì œëª©: ì„¸ë ¨ë˜ê³  í™í•œ (ì˜ˆ: "Midnight Seoul", "ë…ë¦½ì„ ì–¸")
- ì–´íˆ¬: í˜„ëŒ€ì ì´ê³  íŠ¸ë Œë””í•œ í‘œí˜„, ì€ìœ  ì‚¬ìš©
- ê°€ì‚¬: ì‚¬ë‘, ì´ë³„, ìì•„ ì°¾ê¸°, í˜„ì‹¤ê³¼ ê¿ˆ
- ì˜ˆì‹œ: "ìš°ë¦¬ë§Œì˜ ë¦¬ë“¬", "ì´ ìˆœê°„ì„ ê¸°ì–µí•´"

**ğŸ‘” 30-40ëŒ€ (ì§ì¥ì¸/ë¶€ëª¨):**
- ì œëª©: ê³µê°ë˜ê³  ìœ„ë¡œë˜ëŠ” (ì˜ˆ: "ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´", "ìš°ë¦¬ ì•„ì´ì—ê²Œ")
- ì–´íˆ¬: ì„±ìˆ™í•˜ê³  ì§„ì†”í•œ, ì‚¶ì˜ ë¬´ê²Œ ë‹´ê¸´
- ê°€ì‚¬: ê°€ì¡±, ì±…ì„, ì¼ìƒì˜ í–‰ë³µ, ë²„í‹°ê¸°
- ì˜ˆì‹œ: "ë‹¹ì‹  ë•ë¶„ì—", "í‰ë²”í•œ ê¸°ì "

**ğŸ© 50-60ëŒ€ (ì‹œë‹ˆì–´):**
- ì œëª©: ê¹Šì´ìˆê³  í’ˆê²©ìˆëŠ” (ì˜ˆ: "ì¸ìƒì˜ ì˜¤í›„", "ì¶”ì–µì´ íë¥´ëŠ” ê°•")
- ì–´íˆ¬: ì •ì œëœ í‘œí˜„, ì¸ìƒ ì² í•™ ë‹´ê¸´
- ê°€ì‚¬: ì¶”ì–µ, ê°ì‚¬, ì¸ìƒ, ì„¸ì›”, ê°€ì¡±
- ì˜ˆì‹œ: "ì„¸ì›”ì´ ê°€ë¥´ì³ì¤€", "ê·¸ëŒ€ì™€ í•¨ê»˜í•œ ì‹œê°„"

**ğŸŒ ì „ ì—°ë ¹ëŒ€ (All Ages):**
- ì œëª©: ë³´í¸ì  ê°ì„± (ì˜ˆ: "í•¨ê»˜ë¼ì„œ í–‰ë³µí•´", "ê¿ˆì„ í–¥í•´")
- ì–´íˆ¬: ëˆ„êµ¬ë‚˜ ì´í•´í•  ìˆ˜ ìˆëŠ” í‘œí˜„
- ê°€ì‚¬: ì‚¬ë‘, í¬ë§, í–‰ë³µ, ìš©ê¸° ë“± ë³´í¸ì  ì£¼ì œ
- ì˜ˆì‹œ: "ìš°ë¦¬ í•¨ê»˜", "ë¹›ë‚˜ëŠ” ë‚´ì¼"

[íŠ¹ë³„ ì§€ì‹œì‚¬í•­]
1. **ì œëª©**: íƒ€ê²Ÿ ì—°ë ¹ëŒ€ê°€ í´ë¦­í•˜ê³  ì‹¶ì€ ì œëª©ìœ¼ë¡œ ì‘ì„±

2. **ìŠ¤íƒ€ì¼ íƒœê·¸**: Suno AIê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì „ë¬¸ ìŒì•… ìš©ì–´ë¥¼ ì˜ì–´ë¡œ ì‘ì„±
   ì˜ˆì‹œ: "City Pop, Synth Wave, Dreamy, Female Vocal, 80s"

3. **ê°€ì‚¬ êµ¬ì¡°**: 4ë¶„ ë¶„ëŸ‰ì˜ í’€ë²„ì „
   - [Intro] 
   - [Verse 1] 
   - [Pre-Chorus] 
   - [Chorus] 
   - [Instrumental Solo] 
   - [Verse 2] 
   - [Pre-Chorus] 
   - [Chorus] 
   - [Bridge] 
   - [Final Chorus] 
   - [Outro]

4. **ê°€ì‚¬ ì‘ì„± í•µì‹¬**:
   - â­ íƒ€ê²Ÿ ì—°ë ¹ëŒ€(${selections.ageGroup})ì— ë§ëŠ” ì–´íœ˜ì™€ ì–´íˆ¬ ì‚¬ìš©
   - í•´ë‹¹ ì—°ë ¹ëŒ€ê°€ ê³µê°í•  ìˆ˜ ìˆëŠ” ìƒí™©ê³¼ ê°ì • í‘œí˜„
   - ì—°ë ¹ëŒ€ë³„ ê´€ì‹¬ì‚¬ì™€ ê°€ì¹˜ê´€ ë°˜ì˜
   - ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ íë¦„ê³¼ ë¦¬ë“¬ê°

ë°˜ë“œì‹œ ìœ„ í˜•ì‹(ì œëª©: / ìŠ¤íƒ€ì¼: / ê°€ì‚¬:)ì„ ì •í™•íˆ ì§€ì¼œì£¼ì„¸ìš”.`;
  }

  function generateYoutubePrompt() {
    const theme = document.getElementById('custom-theme').value.trim() || selections.theme;
    const usage = document.getElementById('custom-usage').value.trim() || selections.usage || "ì¼ë°˜ ê°ìƒ";
    const instrument = document.getElementById('custom-instrument').value.trim() || selections.instrument || "ììœ ë¡­ê²Œ";
    const bpm = selections.bpm || "ììœ ë¡­ê²Œ";

    return `[ë¯¸ì…˜]
ìœ íŠœë¸Œ ìŒì•… ì±„ë„ìš© ê¸€ë¡œë²Œ ì—…ë¡œë“œ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

[ì„ íƒëœ ë³€ìˆ˜]
- â­ íƒ€ê²Ÿ ì—°ë ¹ëŒ€: ${selections.ageGroup} (ê°€ì¥ ì¤‘ìš”!)
- ì¥ë¥´: ${selections.genre}
- ë¶„ìœ„ê¸°: ${selections.mood}
- ë³´ì»¬: ${selections.vocal}
- ìš©ë„: ${usage}
- ì•…ê¸°: ${instrument}
- ì†ë„(BPM): ${bpm}
- ê°€ì‚¬ ì–¸ì–´: ${selections.lang}
- ì£¼ì œ: ${theme}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ ì „ì²´ êµ¬ì„± ìš”ì†Œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## PART 1: 10ê³¡ ê°œë³„ í”„ë¡¬í”„íŠ¸ ìƒì„±
(ì¤‘ëµâ€¦ ì›ë³¸ ê·¸ëŒ€ë¡œ ìœ ì§€)

ìœ„ í˜•ì‹ì„ ì •í™•íˆ ì§€ì¼œì„œ ì „ì²´ íŒ¨í‚¤ì§€ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.`;
  }

  async function handleGenerate() {
    if (!apiKey) {
      showError('âŒ ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!\n\nìœ„ì˜ ğŸ”‘ API í‚¤ ì„¤ì • ì„¹ì…˜ì—ì„œ Google AI Studio API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
      document.getElementById('api-key-input').focus();
      return;
    }

    const errors = validateSelections();
    if (errors.length > 0) {
      showError(`âŒ ë‹¤ìŒ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”:\n\n${errors.join('\n')}`);
      return;
    }

    hideError();

    const generateBtn = document.getElementById('generate-btn');
    const originalText = generateBtn.textContent;
    generateBtn.disabled = true;
    generateBtn.textContent = 'ğŸµ AIê°€ ê°€ì‚¬ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...';

    const resultDiv = document.getElementById('result');
    const outputContent = document.getElementById('output-content');
    document.getElementById('result-title').textContent = 'ğŸ¼ AIê°€ ê°€ì‚¬ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
    document.getElementById('result-subtitle').textContent = 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš” â³';
    outputContent.innerHTML = '<div class="loading">ì™„ë²½í•œ ê°€ì‚¬ë¥¼ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤</div>';
    resultDiv.style.display = 'block';

    try {
      const promptText = generatePromptText();
      const result = await callGeminiAPI(promptText);

      generatedPrompt = result;
      document.getElementById('result-title').textContent = 'ğŸ¼ AI ìƒì„± ì™„ë£Œ!';
      document.getElementById('result-subtitle').textContent = 'Suno AIì— ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!';
      outputContent.textContent = result;

      setTimeout(() => resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    } catch (error) {
      document.getElementById('result-title').textContent = 'âŒ ì˜¤ë¥˜ ë°œìƒ';
      document.getElementById('result-subtitle').textContent = 'ì•„ë˜ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
      outputContent.textContent = error.message;
      showError(error.message);
    } finally {
      generateBtn.disabled = false;
      generateBtn.textContent = originalText;
    }
  }

  async function handleYoutubeGenerate() {
    if (!apiKey) {
      showError('âŒ ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!\n\nìœ„ì˜ ğŸ”‘ API í‚¤ ì„¤ì • ì„¹ì…˜ì—ì„œ Google AI Studio API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
      document.getElementById('api-key-input').focus();
      return;
    }

    const errors = validateSelections();
    if (errors.length > 0) {
      showError(`âŒ ë‹¤ìŒ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”:\n\n${errors.join('\n')}`);
      return;
    }

    hideError();

    const youtubeBtn = document.getElementById('youtube-btn');
    const originalText = youtubeBtn.textContent;
    youtubeBtn.disabled = true;
    youtubeBtn.textContent = 'ğŸŒ 10ê³¡ + 6ê°œêµ­ì–´ ìƒì„± ì¤‘...';

    const resultDiv = document.getElementById('result');
    const outputContent = document.getElementById('output-content');
    document.getElementById('result-title').textContent = 'ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ìƒì„± ì¤‘...';
    document.getElementById('result-subtitle').textContent = '10ê³¡ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ + 6ê°œ êµ­ì–´ ë²ˆì—­ ì¤‘ â³';
    outputContent.innerHTML = '<div class="loading">ì™„ë²½í•œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤<br/>10ê³¡ì˜ í”„ë¡¬í”„íŠ¸ì™€ 6ê°œ êµ­ì–´ ì—…ë¡œë“œ ì„¸íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤</div>';
    resultDiv.style.display = 'block';

    try {
      const youtubePrompt = generateYoutubePrompt();
      const result = await callGeminiAPI(youtubePrompt);

      generatedPrompt = result;
      document.getElementById('result-title').textContent = 'ğŸŒ ê¸€ë¡œë²Œ ìœ íŠœë¸Œ íŒ¨í‚¤ì§€ ì™„ì„±!';
      document.getElementById('result-subtitle').textContent = '10ê³¡ + 6ê°œêµ­ì–´ ì—…ë¡œë“œ ì„¸íŠ¸';
      outputContent.textContent = result;

      setTimeout(() => resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    } catch (error) {
      document.getElementById('result-title').textContent = 'âŒ ì˜¤ë¥˜ ë°œìƒ';
      document.getElementById('result-subtitle').textContent = 'ì•„ë˜ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
      outputContent.textContent = error.message;
      showError(error.message);
    } finally {
      youtubeBtn.disabled = false;
      youtubeBtn.textContent = originalText;
    }
  }

  // ì´ˆê¸°í™”
  initButtonGroup('genre-btns', data.genres, 'genre');
  initButtonGroup('mood-btns', data.moods, 'mood');
  initButtonGroup('vocal-btns', data.vocals, 'vocal');
  initButtonGroup('usage-btns', data.usages, 'usage');
  initButtonGroup('instrument-btns', data.instruments, 'instrument');
  initButtonGroup('bpm-btns', data.bpms, 'bpm');
  initButtonGroup('age-group-btns', data.ageGroups, 'ageGroup');
  initButtonGroup('lang-btns', data.langs, 'lang');
  initButtonGroup('theme-btns', data.themes, 'theme');

  document.getElementById('generate-btn').addEventListener('click', handleGenerate);
  document.getElementById('youtube-btn').addEventListener('click', handleYoutubeGenerate);
  document.getElementById('reset-btn').addEventListener('click', resetAll);
  document.getElementById('copy-all').addEventListener('click', () => copyToClipboard(generatedPrompt, 'copy-all', 'ë³µì‚¬ ì™„ë£Œ!'));
  document.getElementById('custom-theme').addEventListener('input', hideError);
</script>
</body>
</html>
